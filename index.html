<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>ABB Mobile</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700;800&display=swap');
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;}
:root{--accent:#00e5a0;--accent2:#0099ff;--warn:#ff6b35;--danger:#ff3b5c;--text:#1a2540;--muted:#5a7090;--gold:#c89a00;--silver:#607080;--bronze:#8b5a20;--surface:#ffffff;--surface2:#e8f0f8;--border:#c5d5e8;--radius:12px;--radius-sm:8px;--bg:#eaf2fb;}
html{height:100%;overflow:hidden;}
body{height:100%;overflow:hidden;background:#f0f6fc;color:#1a2540;font-family:'Roboto',sans-serif;max-width:430px;margin:0 auto;}

/* SHELL */
#shell{display:flex;flex-direction:column;height:100%;position:relative;}
.scr{flex:1;overflow-y:auto;overflow-x:hidden;display:none;background:#f0f6fc;}
.scr.show{display:flex;flex-direction:column;}
.scr::-webkit-scrollbar{display:none;}

/* STATUS BAR */
.sb{height:44px;flex-shrink:0;display:flex;align-items:center;justify-content:space-between;padding:0 20px;background:#f0f6fc;}
.sb-time{font-size:15px;font-weight:600;color:#1a2540;}
.sb-icons{display:flex;gap:6px;align-items:center;}

/* BOTTOM NAV */
.bnav{height:72px;flex-shrink:0;background:#ffffff;border-top:1px solid #c5d5e8;display:flex;align-items:center;justify-content:space-around;padding:0 2px;padding-bottom:env(safe-area-inset-bottom,0px);}
.nbtn{background:none;border:none;display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;padding:6px 8px;min-width:52px;color:#fff;font-family:'Roboto',sans-serif;}
.nbtn.inv-pulse{border:2px solid #1B75BB;border-radius:12px;padding:5px 7px;animation:invPulse 1.6s ease-in-out infinite;}

.nbtn .nic{width:24px;height:24px;display:flex;align-items:center;justify-content:center;}
.nbtn .nlb{font-size:10px;font-weight:500;color:#7a90a0;}
.nbtn.on .nlb{color:#1B75BB;}
.nplus{width:52px;height:52px;background:linear-gradient(135deg,#1B75BB,#0D5FA6);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 16px rgba(27,117,187,.5);cursor:pointer;border:none;flex-shrink:0;}

/* HOME */
.h-hdr{padding:14px 20px 10px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0;}
.h-user{display:flex;align-items:center;gap:11px;}
.h-ava{width:44px;height:44px;border-radius:50%;background:#1B75BB;display:flex;align-items:center;justify-content:center;font-size:20px;}
.h-name{font-size:17px;font-weight:700;color:#1a2540;}
.h-sub{font-size:12px;color:#7a90a0;margin-top:1px;}
.h-acts{display:flex;gap:11px;}
.h-ic{width:36px;height:36px;background:#ddeaf5;border-radius:50%;display:flex;align-items:center;justify-content:center;}
.htabs{display:flex;padding:0 20px;gap:22px;border-bottom:1px solid #1f1f1f;flex-shrink:0;}
.htabs::-webkit-scrollbar{display:none;}
.htab{font-size:13.5px;font-weight:500;color:#5a7090;padding:10px 0;border-bottom:2px solid transparent;white-space:nowrap;cursor:pointer;}
.htab.on{color:#1B75BB;border-bottom-color:#1B75BB;font-weight:600;}
.h-body{overflow-y:auto;flex:1;}
.h-body::-webkit-scrollbar{display:none;}
.bcard-wrap{padding:14px 20px;}
.bcard{background:linear-gradient(148deg,#c8dcc3,#b4cfa9,#a0c293);border-radius:18px;padding:20px;position:relative;overflow:hidden;}
.bc-type{font-size:11px;font-weight:700;color:rgba(0,0,0,.45);letter-spacing:.5px;margin-bottom:10px;}
.bc-bal{font-size:25px;font-weight:700;color:#1a1a1a;display:flex;align-items:center;gap:8px;}
.bc-row{display:flex;align-items:center;gap:9px;margin-top:13px;flex-wrap:wrap;}
.bc-visa{font-size:10px;font-weight:800;color:rgba(0,0,0,.5);font-style:italic;background:rgba(0,0,0,.09);border:1px solid rgba(0,0,0,.1);border-radius:5px;padding:2px 6px;}
.bc-exp{font-size:12px;color:rgba(0,0,0,.55);}
.bc-gpay{font-size:11px;color:rgba(0,0,0,.6);font-weight:600;background:rgba(255,255,255,.28);border-radius:7px;padding:2px 7px;}
.bc-vis{position:absolute;top:12px;right:12px;background:linear-gradient(135deg,#888,#555);border-radius:9px;width:60px;height:40px;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.bc-acts{display:flex;gap:8px;margin-top:13px;}
.bc-btn{flex:1;background:#1B75BB;color:#fff;border:none;border-radius:11px;padding:11px 4px;font-size:12px;font-weight:600;cursor:pointer;font-family:'Roboto',sans-serif;}
.bc-dots{display:flex;align-items:center;justify-content:center;gap:7px;margin-top:13px;}
.bcd{width:6px;height:6px;border-radius:50%;background:#b0c8e0;}
.bcd.on{width:18px;border-radius:3px;background:#1B75BB;}
.bcd.sm{width:4px;height:4px;}
.bcd-lbl{font-size:13px;color:#1B75BB;font-weight:500;margin-left:6px;}
.srow{display:flex;align-items:center;justify-content:space-between;padding:12px 20px 7px;}
.srow-t{font-size:15px;font-weight:600;color:#1a2540;}
.srow-l{font-size:13px;color:#1B75BB;font-weight:500;}
.qarow{display:grid;grid-template-columns:1fr 1fr;gap:9px;padding:0 20px;}
.qait{background:#ddeaf5;border-radius:13px;padding:12px;display:flex;align-items:center;gap:10px;cursor:pointer;}
.qait:active{background:#c8dcf0;}
.qaic{width:40px;height:40px;background:#1B75BB;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:17px;flex-shrink:0;}
.qalb{font-size:13px;font-weight:600;color:#1a2540;}
.offsec{padding:12px 20px 16px;}

/* INV */
.inv-title{font-size:28px;font-weight:700;padding:14px 20px 4px;flex-shrink:0;color:#1a2540;}
.inv-badge{display:inline-flex;flex-direction:column;align-items:center;justify-content:center;gap:7px;background:#e0ecf8;border-radius:14px;padding:14px 18px 10px;cursor:pointer;width:100px;animation:invPulse 1.6s ease-in-out infinite;border:none;}
.inv-status{display:flex;align-items:center;gap:6px;font-size:12px;color:#5a7090;padding:0 20px 10px;flex-shrink:0;}
.inv-dot{width:7px;height:7px;border-radius:50%;background:#f59e0b;animation:dp 2s infinite;flex-shrink:0;}
@keyframes dp{0%,100%{opacity:1;}50%{opacity:.3;}}
@keyframes invPulse{0%,100%{box-shadow:0 0 0 2px #1B75BB,0 0 12px 3px rgba(27,117,187,.8);}50%{box-shadow:0 0 0 2px rgba(27,117,187,.2),0 0 3px 0px rgba(27,117,187,.1);}}
.inv-body{overflow-y:auto;flex:1;}
.inv-body::-webkit-scrollbar{display:none;}
.mtabs{display:flex;gap:9px;padding:0 20px 12px;}
.mtab{background:#1B75BB;border-radius:10px;padding:7px 14px;font-size:13px;font-weight:600;color:#fff;cursor:pointer;}
.mtab.off{background:#ddeaf5;color:#5a7090;}
.stk-row{display:flex;gap:10px;padding:0 20px 4px;overflow-x:auto;}
.stk-row::-webkit-scrollbar{display:none;}
.stile{background:#ffffff;border-radius:14px;border:1px solid #c5d5e8;padding:13px;min-width:140px;flex-shrink:0;cursor:pointer;}
.stile:active{background:#e0ecf8;}
.slgo{width:33px;height:33px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;margin-bottom:8px;}
.snm{font-size:13.5px;font-weight:700;margin-bottom:2px;color:#1a2540;}
.spr{font-size:11.5px;color:#5a7090;margin-bottom:3px;}
.schg{font-size:11px;font-weight:600;}
.schg.up{color:#22c55e;}.schg.dn{color:#ef4444;}

/* BANNER */
.banner-wrap{padding:14px 20px 6px;}
.banner{border-radius:20px;overflow:hidden;cursor:pointer;box-shadow:0 8px 32px rgba(27,117,187,.4);transition:transform .14s;}
.banner:active{transform:scale(.97);}
.bnr-bg{background:linear-gradient(135deg,#07305a 0%,#1B75BB 42%,#0c5090 68%,#071e3a 100%);padding:18px;position:relative;min-height:148px;}
.bnr-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(255,255,255,.04) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.04) 1px,transparent 1px);background-size:26px 26px;}
.bnr-glow{position:absolute;right:-20px;top:-20px;width:130px;height:130px;background:radial-gradient(circle,rgba(110,200,255,.26) 0%,transparent 68%);border-radius:50%;}
.bnr-shim{position:absolute;inset:0;background:linear-gradient(108deg,transparent 38%,rgba(255,255,255,.07) 50%,transparent 62%);animation:bsh 3.5s infinite;}
@keyframes bsh{0%{transform:translateX(-120%);}100%{transform:translateX(220%);}}
.bnr-inner{position:relative;z-index:2;}
.bnr-eyebrow{font-size:9px;font-weight:700;letter-spacing:1.5px;color:rgba(255,255,255,.48);text-transform:uppercase;margin-bottom:7px;display:flex;align-items:center;gap:5px;}
.bnr-eyebrow::before{content:'';width:12px;height:1px;background:rgba(255,255,255,.3);}
.bnr-logo-row{display:flex;align-items:center;gap:9px;margin-bottom:7px;}
.bnr-icon{width:36px;height:36px;background:#fff;border-radius:9px;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 10px rgba(0,0,0,.22);flex-shrink:0;}
.bnr-brand{font-size:22px;font-weight:800;color:#fff;letter-spacing:-.4px;line-height:1;font-family:'Roboto',sans-serif;}
.bnr-brand span{color:#7dd3fc;}
.bnr-desc{font-size:10.5px;color:rgba(255,255,255,.65);line-height:1.45;margin-bottom:13px;max-width:195px;}
.bnr-stats{display:flex;gap:12px;align-items:center;}
.bnr-sv{font-size:12.5px;font-weight:700;color:#fff;}
.bnr-sl{font-size:9px;color:rgba(255,255,255,.42);}
.bnr-sep{width:3px;height:3px;border-radius:50%;background:rgba(255,255,255,.18);}
.join-btn{position:absolute;right:16px;bottom:16px;z-index:3;background:#fff;color:#07305a;border:none;border-radius:999px;padding:10px 22px;font-size:13px;font-weight:800;font-family:'Roboto',sans-serif;cursor:pointer;display:flex;align-items:center;gap:7px;box-shadow:0 4px 18px rgba(0,0,0,.28);}
.join-btn:active{transform:scale(.93);}

.ish{display:flex;align-items:center;justify-content:space-between;padding:12px 20px 8px;}
.isht{font-size:15px;font-weight:600;color:#1a2540;}
.ishl{font-size:13px;color:#1B75BB;font-weight:500;}
.bscr{display:flex;gap:10px;padding:0 20px 12px;overflow-x:auto;}
.bscr::-webkit-scrollbar{display:none;}
.btile{background:#ffffff;border:1px solid #c5d5e8;border-radius:13px;padding:12px;min-width:126px;flex-shrink:0;cursor:pointer;}
.btile:active{background:#e0ecf8;}
.blgo{width:34px;height:34px;border-radius:50%;background:#ddeaf5;display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:700;color:#aaa;margin-bottom:8px;text-align:center;line-height:1.25;}
.bnm{font-size:11.5px;font-weight:700;margin-bottom:3px;line-height:1.3;color:#1a2540;}
.byl{font-size:11px;color:#5a7090;}
.ptabs{display:flex;gap:7px;padding:0 20px 10px;overflow-x:auto;}
.ptabs::-webkit-scrollbar{display:none;}
.ptab{background:#1B75BB;border-radius:999px;padding:6px 13px;font-size:11.5px;font-weight:600;color:#fff;cursor:pointer;white-space:nowrap;flex-shrink:0;}
.ptab.off{background:#ddeaf5;color:#5a7090;}
.etfr{display:flex;align-items:center;gap:11px;padding:11px 20px;cursor:pointer;}
.etfr:active{background:#e0ecf8;}
.elgo{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;flex-shrink:0;}
.einf{flex:1;}
.etkr{font-size:13px;font-weight:600;}
.ech{font-size:11px;color:#22c55e;font-weight:500;}
.enm{font-size:11px;color:#7a90a0;margin-top:1px;}
.buybtn{background:linear-gradient(135deg,#1B75BB,#0D5FA6);color:#fff;border:none;border-radius:999px;padding:9px 14px;font-size:11.5px;font-weight:700;cursor:pointer;font-family:'Roboto',sans-serif;white-space:nowrap;}

/* ARENA */
#AS{position:fixed;inset:0;z-index:999;background:var(--bg);color:var(--text);font-family:'Roboto',sans-serif;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;display:none;}
#AS::-webkit-scrollbar{display:none;}
#AS-bar{position:sticky;top:0;z-index:102;height:46px;background:#ffffff;border-bottom:1px solid #c5d5e8;display:flex;align-items:center;padding:0 14px;gap:10px;}
#AS-back{background:#e0ecf8;border:none;color:#1a2540;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:22px;display:flex;align-items:center;justify-content:center;font-family:'Roboto',sans-serif;}
#AS-back:active{background:#2a3040;}
#AS-barlbl{font-size:13px;font-weight:700;color:#1a2540;font-family:'Roboto',sans-serif;}
#AS-barsub{font-size:10px;color:#7a90a0;margin-left:auto;}
#AS .tc{position:fixed;top:112px;right:.9rem;z-index:1002;display:flex;flex-direction:column;gap:.4rem;pointer-events:none;max-width:280px;}
#AS .toast{background:#fff5f6;border:1px solid var(--danger);border-left:4px solid var(--danger);border-radius:var(--radius-sm);padding:.55rem .85rem;font-size:.78rem;color:#7a0a1a;box-shadow:0 4px 14px rgba(255,59,92,.18);animation:tIn .22s ease;display:flex;align-items:flex-start;gap:.42rem;}
#AS .toast.warn{border-color:var(--warn);border-left-color:var(--warn);background:#fff8f0;color:#7a3a00;}
#AS .toast.out{animation:tOut .22s ease forwards;}
@keyframes tIn{from{opacity:0;transform:translateX(12px)}to{opacity:1;transform:translateX(0)}}
@keyframes tOut{from{opacity:1}to{opacity:0;transform:translateX(12px)}}
#AS header{background:var(--surface);border-bottom:1px solid var(--border);padding:0 .9rem;height:52px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:46px;z-index:100;}
#AS .logo{font-size:1rem;font-weight:800;letter-spacing:-.5px;}
#AS .logo span{color:#0077cc;}
#AS .balance-pill{background:#ddeaf7;border:1px solid #1B75BB;border-radius:12px;padding:.28rem .78rem;font-family:'Roboto',sans-serif;font-size:.76rem;color:var(--accent);display:flex;align-items:center;gap:.38rem;transition:opacity .15s;}
#AS .balance-pill:active{opacity:.75;}
#AS .balance-pill .label{color:#3a6090;font-size:.6rem;font-family:'Roboto',sans-serif;}
#AS nav{background:var(--surface);border-bottom:1px solid var(--border);display:flex;padding:0 .9rem;position:sticky;top:98px;z-index:99;overflow-x:auto;}
#AS nav::-webkit-scrollbar{display:none;}
#AS .nav-btn{background:none;border:none;color:var(--muted);font-family:'Roboto',sans-serif;font-size:.76rem;font-weight:600;padding:.7rem .85rem;cursor:pointer;border-bottom:2px solid transparent;transition:all .2s;white-space:nowrap;}
#AS .nav-btn.active{color:var(--accent);border-bottom-color:var(--accent);}
#AS main{padding:.85rem;}
#AS .screen{display:none;}
#AS .screen.active{display:block;}
#AS .section-title{font-size:1.1rem;font-weight:800;margin-bottom:.26rem;color:#1a2540;}
#AS .section-sub{color:#5a7090;font-size:.74rem;margin-bottom:.95rem;}
/* ‚îÄ‚îÄ STOCKS SCREEN ‚îÄ‚îÄ */
#AS .stocks-screen-header{margin-bottom:1rem;}
#AS .stocks-screen-header h2{font-size:1.05rem;font-weight:800;color:#0a1e3a;margin:0 0 .2rem;}
#AS .stocks-screen-header p{font-size:.72rem;color:#6a85a0;margin:0;}

/* Search */
#AS .search-wrap{position:relative;margin-bottom:1rem;}
#AS .search-wrap svg{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);opacity:.4;pointer-events:none;}
#AS .search-bar{width:100%;background:#fff;border:1.5px solid #d0dff0;border-radius:12px;padding:.6rem .8rem .6rem 2.4rem;color:#1a2540;font-family:'Roboto',sans-serif;font-size:.82rem;outline:none;transition:border-color .2s;box-shadow:0 1px 4px rgba(0,80,160,.06);}
#AS .search-bar:focus{border-color:#1B75BB;box-shadow:0 0 0 3px rgba(27,117,187,.12);}
#AS .search-bar::placeholder{color:#a0b4c8;}

/* Selection counter bar */
#AS .sel-counter{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem;padding:.5rem .75rem;background:#f0f6ff;border-radius:10px;border:1px solid #d0e4f8;position:sticky;top:0;z-index:10;box-shadow:0 2px 8px rgba(0,80,160,.06);}
#AS .sel-counter-left{font-size:.75rem;color:#1a3a6a;font-weight:600;}
#AS .sel-dots{display:flex;gap:5px;}
#AS .sel-dot{width:10px;height:10px;border-radius:50%;background:#d0e4f8;border:1.5px solid #b0cce8;transition:all .2s;}
#AS .sel-dot.filled{background:#1B75BB;border-color:#1B75BB;transform:scale(1.15);}
#AS .sel-dot.min-ok{background:#16a34a;border-color:#16a34a;}

/* Stock grid ‚Äî horizontal list style */
#AS .stocks-grid{display:flex;flex-direction:column;gap:.55rem;margin-bottom:1rem;max-height:456px;overflow-y:auto;padding-right:4px;}
#AS .stocks-grid::-webkit-scrollbar{width:4px;}
#AS .stocks-grid::-webkit-scrollbar-track{background:transparent;}
#AS .stocks-grid::-webkit-scrollbar-thumb{background:#c0d4e8;border-radius:4px;}

/* Stock card ‚Äî wide horizontal */
#AS .stock-card{background:#fff;border:1.5px solid #d8e8f5;border-radius:14px;padding:.65rem .8rem;cursor:pointer;position:relative;display:flex;align-items:center;gap:.6rem;transition:border-color .18s,box-shadow .18s,transform .12s;box-shadow:0 1px 4px rgba(0,80,160,.05);}
#AS .stock-card:active{transform:scale(.985);}
#AS .stock-card.selected{border-color:#1B75BB;background:linear-gradient(135deg,#f0f7ff 0%,#e8f2fc 100%);box-shadow:0 2px 10px rgba(27,117,187,.15);}
#AS .stock-card.maxed{opacity:.38;cursor:not-allowed;transform:none;}

/* Logo circle */
#AS .sc-logo{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;background:#f0f4f8;border:1px solid #e4edf8;}
#AS .sc-logo img{width:26px;height:26px;object-fit:contain;}
#AS .sc-logo span{font-size:.65rem;font-weight:800;color:#1B75BB;}

/* Card body */
#AS .sc-body{flex:1;min-width:0;}
#AS .sc-ticker-row{display:flex;align-items:center;gap:.45rem;margin-bottom:.15rem;}
#AS .stock-ticker{font-family:'Roboto',sans-serif;font-size:.78rem;font-weight:800;color:#0a2040;letter-spacing:.3px;}
#AS .sc-sector{font-size:.6rem;color:#5a80a0;background:#e8f0f8;border-radius:4px;padding:1px 5px;font-weight:500;}
#AS .stock-name{font-size:.72rem;color:#6a85a0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

/* Price area */
#AS .sc-price-col{text-align:right;flex-shrink:0;}
#AS .stock-price{font-family:'Roboto',sans-serif;font-size:.9rem;font-weight:700;color:#0a2040;}
#AS .stock-change{font-family:'Roboto',sans-serif;font-size:.7rem;font-weight:600;margin-top:.1rem;padding:2px 6px;border-radius:6px;display:inline-block;}
#AS .pos{color:#16a34a;}#AS .neg{color:#dc2626;}
#AS .stock-change.pos{background:#f0fdf4;color:#16a34a;}
#AS .stock-change.neg{background:#fff5f5;color:#dc2626;}

/* Check indicator */
#AS .sc-check{width:22px;height:22px;border-radius:50%;border:2px solid #c8ddf0;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s;}
#AS .stock-card.selected .sc-check{background:#1B75BB;border-color:#1B75BB;}
#AS .sc-check svg{opacity:0;transition:opacity .15s;}
#AS .stock-card.selected .sc-check svg{opacity:1;}

/* ‚îÄ‚îÄ BASKET PANEL ‚îÄ‚îÄ */
#AS .basket-panel{background:#fff;border:1.5px solid #d0e4f8;border-radius:16px;padding:1.1rem;margin-bottom:1rem;box-shadow:0 2px 12px rgba(0,80,160,.07);}
#AS .basket-header{font-size:.92rem;font-weight:800;color:#0a1e3a;margin-bottom:.85rem;display:flex;align-items:center;gap:.5rem;}

/* Update slots */
#AS .update-info{background:linear-gradient(135deg,#f0f8ff,#e8f3ff);border:1px solid #c0d8f0;border-radius:12px;padding:.6rem .9rem;font-size:.72rem;margin-bottom:.85rem;color:#1a3a6a;}
#AS .update-info strong{color:#1B75BB;}
#AS .slot-row{display:flex;align-items:center;gap:.4rem;margin-top:.32rem;}
#AS .slot-dot{width:9px;height:9px;border-radius:50%;background:#1B75BB;box-shadow:0 0 0 2px rgba(27,117,187,.2);}
#AS .slot-dot.used{background:#c8d8e8;box-shadow:none;}

/* Balance row */
#AS .balance-info{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem;margin-bottom:.85rem;}
#AS .bi-card{background:#f4f8fe;border-radius:10px;padding:.5rem .6rem;text-align:center;border:1px solid #e0ecf8;}
#AS .bi-label{font-size:.58rem;color:#7a95b0;margin-bottom:.18rem;font-weight:500;letter-spacing:.3px;text-transform:uppercase;}
#AS .bi-value{font-family:'Roboto',sans-serif;font-size:.88rem;font-weight:700;color:#0a2040;}

/* Progress bar */
#AS .progress-bar-wrap{background:#e8f0f8;border-radius:999px;height:7px;margin-bottom:.85rem;overflow:hidden;}
#AS .progress-bar-fill{height:100%;background:linear-gradient(90deg,#1B75BB,#0abaff);border-radius:999px;transition:width .35s cubic-bezier(.4,0,.2,1),background .3s;}
#AS .progress-bar-fill.over{background:linear-gradient(90deg,#f87171,#ef4444);}

/* Warning */
#AS .warning-box{background:#fff8f0;border:1.5px solid #fcd0a0;border-radius:10px;padding:.55rem .8rem;font-size:.74rem;color:#a05010;margin-bottom:.75rem;display:none;border-left:4px solid #f59e0b;}
#AS .warning-box.show{display:flex;align-items:flex-start;gap:.4rem;}

/* Portfolio items */
#AS .portfolio-item{background:#f8fbff;border:1px solid #e0ecf8;border-radius:12px;padding:.75rem .9rem;margin-bottom:.5rem;}
#AS .portfolio-item:last-child{margin-bottom:0;}
#AS .pi-top{display:flex;align-items:center;gap:.7rem;}
#AS .pi-info{flex:1;min-width:0;}
#AS .pi-ticker{font-family:'Roboto',sans-serif;font-size:.72rem;font-weight:800;color:#1B75BB;letter-spacing:.3px;}
#AS .pi-name{font-size:.7rem;color:#7a95b0;margin-top:.08rem;}
#AS .pi-right{display:flex;flex-direction:column;gap:.3rem;align-items:flex-end;}

/* Coin input */
#AS .pi-input{background:#fff;border:1.5px solid #c8ddf0;border-radius:9px;padding:.38rem .65rem;color:#0a2040;font-family:'Roboto',sans-serif;font-size:.84rem;font-weight:600;width:108px;outline:none;text-align:right;transition:border-color .18s;}
#AS .pi-input:focus{border-color:#1B75BB;box-shadow:0 0 0 3px rgba(27,117,187,.1);}
#AS .pi-input.over{border-color:#ef4444;box-shadow:0 0 0 3px rgba(239,68,68,.1);}

/* Percent buttons */
#AS .pct-btns{display:flex;gap:.3rem;}
#AS .pct-btn{background:#fff;border:1.5px solid #c8ddf0;border-radius:6px;color:#1B75BB;font-family:'Roboto',sans-serif;font-size:.65rem;font-weight:700;padding:.2rem .5rem;cursor:pointer;transition:all .15s;}
#AS .pct-btn:hover{background:#1B75BB;border-color:#1B75BB;color:#fff;}
#AS .pct-btn.disabled{opacity:.25;cursor:not-allowed;}
#AS .pct-btn.disabled:hover{background:#fff;border-color:#c8ddf0;color:#1B75BB;}
#AS .pi-warn{font-size:.6rem;color:#ef4444;display:none;text-align:right;}
#AS .pi-warn.show{display:block;}
#AS .pi-hint{font-size:.58rem;color:#9ab0c4;text-align:right;margin-top:1px;}

/* Confirm buttons */
#AS .basket-actions{display:flex;gap:.65rem;flex-wrap:wrap;margin-top:1rem;}

/* Confirmed flash */
#AS .confirmed-flash{background:linear-gradient(135deg,#e8f7ef,#d8f0e8);border:1.5px solid #86efac;border-radius:16px;padding:1.1rem;margin-top:.5rem;display:none;}
#AS .conf-header{display:flex;align-items:center;gap:.5rem;margin-bottom:.85rem;}
#AS .conf-tag{background:#16a34a;color:#fff;font-size:.62rem;font-weight:800;padding:3px 9px;border-radius:999px;letter-spacing:.5px;}
#AS .conf-items{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:.75rem;}
#AS .conf-chip{background:#fff;border:1px solid #86efac;border-radius:10px;padding:.4rem .75rem;font-size:.76rem;font-weight:700;color:#0a4020;display:flex;align-items:center;gap:.35rem;}
#AS .conf-chip .chip-amt{color:#16a34a;font-weight:800;}
#AS .conf-stat{font-size:.74rem;color:#3a6a4a;}

#AS .check-badge{display:none;}
#AS .pos{color:#16a34a;}#AS .neg{color:#dc2626;}
#AS .btn{background:var(--accent);color:#000;border:none;border-radius:var(--radius-sm);padding:.52rem 1rem;font-family:'Roboto',sans-serif;font-size:.78rem;font-weight:700;cursor:pointer;}
#AS .btn:disabled{opacity:.35;cursor:not-allowed;}
#AS .btn-outline{background:transparent;border:1px solid var(--border);color:var(--text);}
#AS .btn-sm{padding:.3rem .72rem;font-size:.68rem;}
#AS .confirmed-flash{display:none;background:#d8ecfa;border:1px solid #1B75BB;border-radius:var(--radius);padding:1rem;margin-top:.82rem;}
#AS .week-tabs{display:flex;gap:.34rem;margin-bottom:.95rem;flex-wrap:wrap;}
#AS .week-tab{background:var(--surface);border:1px solid var(--border);border-radius:999px;padding:.3rem .8rem;font-size:.7rem;font-weight:700;cursor:pointer;color:var(--muted);}
#AS .week-tab.active{background:var(--accent);color:#000;border-color:var(--accent);}
#AS .week-tab.cur{border-color:var(--accent2);color:var(--accent2);}
#AS .week-tab.cur.active{background:var(--accent2);color:#000;border-color:var(--accent2);}
#AS .week-tab.summary-tab{border-color:var(--gold);color:var(--gold);}
#AS .week-tab.summary-tab.active{background:var(--gold);color:#000;border-color:var(--gold);}
#AS .week-panel{display:none;}
#AS .week-panel.active{display:block;}
#AS .history-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:.95rem;margin-bottom:.82rem;}
#AS .hc-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:.74rem;flex-wrap:wrap;gap:.4rem;}
#AS .hc-title{font-size:.82rem;font-weight:800;}
#AS .hc-badges{display:flex;align-items:center;gap:.38rem;flex-wrap:wrap;}
#AS .hc-badge{background:var(--surface2);border:1px solid var(--border);border-radius:999px;padding:.16rem .58rem;font-size:.63rem;font-family:'Roboto',sans-serif;}
#AS .hc-badge.green{border-color:var(--accent);color:var(--accent);background:rgba(0,229,160,.07);}
#AS .hc-badge.blue{border-color:var(--accent2);color:var(--accent2);background:rgba(0,153,255,.07);}
#AS .hc-badge.gold{border-color:var(--gold);color:var(--gold);background:rgba(245,200,66,.07);}
#AS .hc-badge.warn{border-color:var(--warn);color:var(--warn);background:rgba(255,107,53,.07);}
#AS .i-btn{background:none;border:1px solid var(--border);border-radius:50%;width:21px;height:21px;color:var(--muted);cursor:pointer;font-size:.7rem;display:inline-flex;align-items:center;justify-content:center;font-family:serif;}
#AS .hist-table{width:100%;border-collapse:collapse;margin-bottom:.62rem;font-size:.72rem;}
#AS .hist-table th{font-size:.59rem;color:var(--muted);text-align:left;padding:.28rem .48rem;border-bottom:1px solid var(--border);text-transform:uppercase;letter-spacing:.4px;}
#AS .hist-table td{padding:.4rem .48rem;border-bottom:1px solid rgba(30,35,48,.38);}
#AS .hist-table tr:last-child td{border-bottom:none;}
#AS .mono{font-family:'Roboto',sans-serif;}
#AS .week-summary{display:flex;gap:.82rem;padding:.72rem;background:rgba(0,0,0,.22);border-radius:var(--radius-sm);flex-wrap:wrap;}
#AS .ws-label{font-size:.58rem;color:var(--muted);margin-bottom:.12rem;}
#AS .ws-val{font-family:'Roboto',sans-serif;font-size:.8rem;font-weight:600;}
#AS .btc-hist-row{display:flex;align-items:center;gap:.68rem;padding:.58rem .72rem;background:rgba(247,147,26,.05);border:1px solid rgba(247,147,26,.14);border-radius:var(--radius-sm);margin-bottom:.44rem;flex-wrap:wrap;}
#AS .btc-hist-row.winner{background:rgba(0,229,160,.05);border-color:rgba(0,229,160,.22);}
#AS .bhr-label{font-size:.6rem;color:var(--muted);}
#AS .bhr-val{font-family:'Roboto',sans-serif;font-size:.77rem;font-weight:600;}
#AS .bhr-result{font-size:.66rem;}
#AS .win-tag{background:var(--accent);color:#000;font-size:.56rem;font-weight:800;padding:.09rem .32rem;border-radius:999px;margin-left:.32rem;vertical-align:middle;}
#AS .rank-result-row{display:flex;align-items:center;gap:.82rem;padding:.72rem;background:rgba(0,153,255,.06);border:1px solid rgba(0,153,255,.18);border-radius:var(--radius-sm);margin-bottom:.48rem;flex-wrap:wrap;}
#AS .rr-item{text-align:center;}
#AS .rr-label{font-size:.59rem;color:var(--muted);margin-bottom:.14rem;}
#AS .rr-val{font-family:'Roboto',sans-serif;font-size:.94rem;font-weight:800;}
#AS .dashboard-tabs{display:flex;margin-bottom:.95rem;border-bottom:1px solid var(--border);}
#AS .dash-tab{background:none;border:none;border-bottom:2px solid transparent;color:var(--muted);font-family:'Roboto',sans-serif;font-size:.78rem;font-weight:700;padding:.55rem .9rem;cursor:pointer;margin-bottom:-1px;}
#AS .dash-tab.active{color:var(--accent);border-bottom-color:var(--accent);}
#AS .dash-panel{display:none;}
#AS .dash-panel.active{display:block;}
#dp-lock{background:#1B75BB;border-radius:16px;text-align:center;padding:2.5rem 1.5rem;margin-bottom:1rem;color:#fff;}
#AS .round-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:.95rem;margin-bottom:.82rem;}
#AS .status-row{display:flex;align-items:center;gap:.72rem;margin-bottom:.72rem;flex-wrap:wrap;}
#AS .status-badge{background:var(--surface2);border:1px solid var(--border);border-radius:999px;padding:.18rem .68rem;font-size:.67rem;font-family:'Roboto',sans-serif;}
#AS .status-badge.green{border-color:var(--accent);color:var(--accent);background:rgba(0,229,160,.07);}
#AS .status-badge.blue{border-color:var(--accent2);color:var(--accent2);background:rgba(0,153,255,.07);}
#AS .info-btn{background:none;border:1px solid var(--border);border-radius:50%;width:21px;height:21px;color:var(--muted);cursor:pointer;font-size:.7rem;display:inline-flex;align-items:center;justify-content:center;font-family:serif;}
#AS .rounds-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:.38rem;}
#AS .round-dot{background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:.48rem .22rem;text-align:center;}
#AS .round-dot.done{border-color:rgba(0,229,160,.3);background:rgba(0,229,160,.05);}
#AS .round-dot.current{border-color:var(--accent);background:rgba(0,229,160,.1);}
#AS .rd-num{font-family:'Roboto',sans-serif;font-weight:700;font-size:.76rem;}
#AS .rd-label{color:var(--muted);font-size:.52rem;margin-top:.09rem;}
#AS .round-dot.done .rd-num,#AS .round-dot.done .rd-label{color:rgba(0,229,160,.6);}
#AS .round-dot.current .rd-num,#AS .round-dot.current .rd-label{color:var(--accent);}
#AS .leaderboard{width:100%;border-collapse:collapse;}
#AS .leaderboard th{text-align:left;font-size:.59rem;color:var(--muted);padding:.32rem .58rem;border-bottom:1px solid var(--border);font-weight:600;text-transform:uppercase;letter-spacing:.4px;}
#AS .leaderboard td{padding:.46rem .58rem;font-size:.74rem;border-bottom:1px solid rgba(30,35,48,.36);vertical-align:middle;}
#AS .leaderboard tr:last-child td{border-bottom:none;}
#AS .leaderboard tr.me td{background:rgba(0,229,160,.06);}
#AS .leaderboard tr.me td:first-child{border-left:3px solid var(--accent);padding-left:.42rem;}
#AS .rank-col{font-family:'Roboto',sans-serif;font-weight:700;}
#AS .rank-gold{color:var(--gold);}#AS .rank-silver{color:var(--silver);}#AS .rank-bronze{color:var(--bronze);}
#AS .prize-tag{font-family:'Roboto',sans-serif;font-size:.66rem;color:var(--gold);background:rgba(245,200,66,.09);border:1px solid rgba(245,200,66,.18);border-radius:4px;padding:.07rem .3rem;}
#AS .coin-val{font-family:'Roboto',sans-serif;font-size:.72rem;}
#AS .me-badge{background:var(--accent);color:#000;font-size:.5rem;font-weight:800;padding:.07rem .3rem;border-radius:999px;margin-left:.3rem;vertical-align:middle;}
#AS .dots-row td{text-align:center;color:var(--muted);font-size:.62rem;padding:.2rem;letter-spacing:3px;}
#AS .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.82);z-index:1001;display:none;align-items:center;justify-content:center;padding:.7rem;backdrop-filter:blur(4px);}
#AS .modal-overlay.show{display:flex;}
#AS .modal{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:1.2rem;max-width:420px;width:100%;max-height:88vh;overflow-y:auto;position:relative;animation:mIn .2s ease;}
@keyframes mIn{from{opacity:0;transform:scale(.95) translateY(8px)}to{opacity:1;transform:scale(1) translateY(0)}}
@keyframes iblink{0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(0,153,255,.4);}50%{opacity:.6;box-shadow:0 0 0 4px rgba(0,153,255,.0);}}
#AS .modal-close{position:absolute;top:.72rem;right:.72rem;background:var(--surface2);border:none;color:var(--muted);width:24px;height:24px;border-radius:50%;cursor:pointer;font-size:.84rem;display:flex;align-items:center;justify-content:center;}
#AS .modal-close:hover{background:var(--danger);color:#fff;}
#AS .modal-title{font-size:.95rem;font-weight:800;margin-bottom:.82rem;}
#AS .prize-table{width:100%;border-collapse:collapse;}
#AS .prize-table th{text-align:left;font-size:.62rem;color:var(--muted);padding:.28rem .38rem;border-bottom:1px solid var(--border);}
#AS .prize-table td{padding:.36rem .38rem;font-size:.74rem;border-bottom:1px solid rgba(30,35,48,.36);}
#AS .prize-table tr:last-child td{border-bottom:none;}
#AS .prize-total{margin-top:.72rem;padding-top:.72rem;border-top:1px solid var(--border);display:flex;justify-content:space-between;font-weight:700;font-size:.78rem;}
#AS .prize-total span:last-child{color:var(--gold);font-family:'Roboto',sans-serif;}
#AS .earn-modal-row{display:flex;justify-content:space-between;align-items:flex-start;padding:.44rem 0;border-bottom:1px solid rgba(30,35,48,.36);font-size:.74rem;gap:.6rem;}
#AS .earn-modal-row:last-child{border-bottom:none;}
#AS .erm-src{color:var(--muted);flex:1;}
#AS .erm-amt{font-family:'Roboto',sans-serif;font-weight:600;white-space:nowrap;}
#AS .btc-date-banner{background:linear-gradient(135deg,rgba(247,147,26,.12),rgba(247,147,26,.04));border:1px solid rgba(247,147,26,.34);border-radius:var(--radius-sm);padding:.72rem .88rem;margin-bottom:.82rem;text-align:center;}
#AS .btc-date-banner .dl{font-size:.59rem;color:var(--muted);margin-bottom:.18rem;text-transform:uppercase;letter-spacing:.5px;}
#AS .btc-date-banner .dv{font-size:.86rem;font-weight:800;color:#f7931a;}
#AS .btc-date-banner .tv{font-family:'Roboto',sans-serif;font-size:.68rem;color:var(--muted);margin-top:.12rem;}
#AS .btc-price-row{display:grid;grid-template-columns:1fr 1fr;gap:.72rem;margin-bottom:.44rem;}
#AS .btc-mock-box{background:var(--surface2);border:1px solid rgba(247,147,26,.24);border-radius:var(--radius-sm);padding:.56rem .74rem;}
#AS .btc-mock-box .bml{font-size:.59rem;color:var(--muted);margin-bottom:.2rem;}
#AS .btc-mock-box .bmp{font-family:'Roboto',sans-serif;font-size:.86rem;font-weight:700;color:#f7931a;}
#AS .btc-mock-box .bmc{font-family:'Roboto',sans-serif;font-size:.61rem;margin-top:.12rem;}
#AS .form-label{display:block;font-size:.68rem;color:var(--muted);margin-bottom:.28rem;}
#AS .form-input{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:.52rem .74rem;color:var(--text);font-family:'Roboto',sans-serif;font-size:.78rem;outline:none;}
#AS .success-msg{background:rgba(0,229,160,.09);border:1px solid rgba(0,229,160,.28);border-radius:var(--radius-sm);padding:.6rem .74rem;color:var(--accent);font-size:.74rem;text-align:center;display:none;}
#AS .success-msg.show{display:block;}
#AS .float-btn{position:fixed;right:.8rem;bottom:1rem;background:linear-gradient(135deg,#f7931a,#e8750a);color:#fff;border:none;border-radius:var(--radius);padding:.58rem .85rem;font-family:'Roboto',sans-serif;font-size:.7rem;font-weight:700;cursor:pointer;z-index:200;box-shadow:0 4px 14px rgba(247,147,26,.42);text-align:center;line-height:1.3;}
#AS .float-btn .bi{font-size:.94rem;display:block;margin-bottom:.08rem;}
#AS .float-btn .be{font-size:.58rem;opacity:.8;}
</style>
</head>
<body>

<!-- ARENA OVERLAY -->
<div id="AS" style="display:none">
  <div id="AS-bar">
    <button id="AS-back" onclick="closeArena()">&#8249;</button>
    <span id="AS-barlbl">ABB Invest</span>
  </div>
  <div class="tc" id="TC"></div>

<header>
  <div class="logo">Invest<span>Arena</span></div>
  <div style="display:flex;gap:6px;align-items:center;">
    <div class="balance-pill" id="pillFinal" onclick="showScreen('portfel');switchWeek('wsum',document.querySelector('#screen-portfel .week-tab.summary-tab'))" style="cursor:pointer;flex-direction:column;align-items:flex-end;gap:0;padding:.22rem .72rem;" title="√úmumi V…ôziyy…ôt…ô get">
      <span class="label" style="font-size:.52rem;letter-spacing:.3px;">Fƒ∞NAL BALANS</span>
      <span style="font-size:.82rem;font-weight:800;color:#0077cc;font-family:'Roboto',sans-serif;line-height:1.2;" id="finalBalanceDisplay">14,677</span>
      <span style="font-size:.5rem;color:#5a7090;">ABB coin</span>
    </div>
    <div class="balance-pill" id="pillRound" onclick="showScreen('portfel');switchWeek('w3',document.querySelector('#screen-portfel .week-tab.cur'))" style="cursor:pointer;flex-direction:column;align-items:flex-end;gap:0;padding:.22rem .72rem;background:#f0f8f0;border-color:#22c55e;" title="3-c√º Rounda get">
      <span class="label" style="font-size:.52rem;letter-spacing:.3px;color:#1a6a30;">ROUND BALANSI</span>
      <span style="font-size:.82rem;font-weight:800;color:#16a34a;font-family:'Roboto',sans-serif;line-height:1.2;" id="roundBalanceDisplay">10,000</span>
      <span style="font-size:.5rem;color:#4a8a5a;">ABB coin</span>
    </div>
  </div>
</header>

<nav>
  <button class="nav-btn active"  onclick="showScreen('stocks')">S…ôhml…ôr</button>
  <button class="nav-btn"         onclick="showScreen('portfel')">Portfel</button>
  <button class="nav-btn"         onclick="showScreen('siralama')">Sƒ±ralama</button>
  <button class="nav-btn"         onclick="showScreen('xeberler')">X…ôb…ôrl…ôr</button>
</nav>

<main>

<!-- ==================== SCREEN: S∆èHML∆èR ==================== -->
<div class="screen active" id="screen-stocks">

  <!-- Header -->
  <div class="stocks-screen-header">
    <h2>üìà Portfel Qurun</h2>
    <p>3‚Äì5 s…ôhm se√ßin ¬∑ H…ôr birin…ô 10%‚Äì50% ABB coin ayƒ±rƒ±n ¬∑ 3-c√º round aktivdir</p>
  </div>

  <!-- Search -->
  <div class="search-wrap">
    <svg width="15" height="15" viewBox="0 0 24 24" fill="none"><circle cx="11" cy="11" r="8" stroke="#1a2540" stroke-width="2"/><path d="M21 21l-4.35-4.35" stroke="#1a2540" stroke-width="2" stroke-linecap="round"/></svg>
    <input class="search-bar" type="text" id="searchInput" placeholder="Ticker v…ô ya ≈üirk…ôt axtar‚Ä¶" oninput="filterStocks()">
  </div>

  <!-- Selection counter -->
  <div class="sel-counter">
    <span class="sel-counter-left" id="selCountLabel">0 / 5 se√ßildi &nbsp;¬∑&nbsp; minimum 3</span>
    <div class="sel-dots" id="selDots">
      <div class="sel-dot"></div><div class="sel-dot"></div><div class="sel-dot"></div><div class="sel-dot"></div><div class="sel-dot"></div>
    </div>
  </div>

  <div class="stocks-grid" id="stocksGrid"></div>

  <!-- Basket -->
  <div id="basketWrap" style="display:none">
    <div class="basket-panel">
      <div class="basket-header">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z" stroke="#1B75BB" stroke-width="2" stroke-linejoin="round"/><line x1="3" y1="6" x2="21" y2="6" stroke="#1B75BB" stroke-width="2"/><path d="M16 10a4 4 0 01-8 0" stroke="#1B75BB" stroke-width="2" stroke-linecap="round"/></svg>
        Coin Paylamasƒ±
      </div>

      <div class="update-info">
        ‚è± <strong>3-c√º round</strong> ‚Äî Yenil…ôm…ô: g√ºn <strong>1, 5, 10</strong>
        <div class="slot-row">
          <span style="font-size:.68rem;color:#5a80a0;">Slot:</span>
          <div class="slot-dot used"></div><div class="slot-dot used"></div><div class="slot-dot"></div>
          <span style="font-size:.7rem;color:#1B75BB;font-weight:600;">1 yenil…ôm…ô qalƒ±r</span>
        </div>
      </div>

      <!-- Balance cards -->
      <div class="balance-info">
        <div class="bi-card">
          <div class="bi-label">Balans</div>
          <div class="bi-value" id="biTotal">10,000</div>
        </div>
        <div class="bi-card">
          <div class="bi-label">Ayrƒ±lan</div>
          <div class="bi-value" id="biAlloc" style="color:#1B75BB;">0</div>
        </div>
        <div class="bi-card">
          <div class="bi-label">Qalan</div>
          <div class="bi-value" id="biRem" style="color:#16a34a;">10,000</div>
        </div>
      </div>

      <div class="progress-bar-wrap"><div class="progress-bar-fill" id="progFill" style="width:0%"></div></div>
      <div class="warning-box" id="warningBox">‚ö†</div>
      <div id="portfolioItems"></div>

      <div class="basket-actions" style="justify-content:flex-start;">
        <button class="btn btn-sm" id="confirmBtn" onclick="confirmPortfolio()" disabled style="padding:.45rem .9rem;font-size:.72rem;">
          üöÄ 3-c√º Rounda G√∂nd…ôr
        </button>
        <button class="btn btn-outline btn-sm" onclick="clearBasket()" style="color:#e04040;border-color:#fca5a5;">
          üóë Sƒ±fƒ±rla
        </button>
      </div>
    </div>
  </div>

  <!-- Confirmed state -->
  <div class="confirmed-flash" id="confirmedFlash">
    <div class="conf-header">
      <span class="conf-tag">‚úì G√ñND∆èRƒ∞LDƒ∞</span>
      <span style="font-size:.82rem;font-weight:700;color:#0a4020;">3-c√º Round Portfeli</span>
    </div>
    <div class="conf-items" id="confirmedItems"></div>
    <div class="conf-stat" id="confirmedStat"></div>
    <button class="btn btn-outline btn-sm" style="margin-top:.85rem;color:#1B75BB;border-color:#90c0e8;" onclick="resetConfirm()">
      ‚Ü∫ Yenil…ô (1 h√ºquq qalƒ±r)
    </button>
  </div>

</div>

<!-- ==================== SCREEN: PORTFEL ==================== -->
<div class="screen" id="screen-portfel">
  <div class="section-title">Portfel Tarixi</div>
  <div class="section-sub">Biz indi 3-c√º rounddayƒ±q. Ke√ßmi≈ü roundlarƒ±n n…ôtic…ôl…ôri v…ô qazanclar a≈üaƒüƒ±dadƒ±r.</div>

  <div class="week-tabs">
    <button class="week-tab active" onclick="switchWeek('w1',this)">1-ci Round</button>
    <button class="week-tab"        onclick="switchWeek('w2',this)">2-ci Round</button>
    <button class="week-tab cur"    onclick="switchWeek('w3',this)">3-c√º Round (Aktiv)</button>
    <button class="week-tab summary-tab" onclick="switchWeek('wsum',this)">üìä √úmumi V…ôziyy…ôt</button>
  </div>

  <!-- ---- WEEK 1 ---- -->
  <div class="week-panel active" id="panel-w1">

    <!-- Sƒ±ralama n…ôtic…ôsi -->
    <div class="history-card">
      <div class="hc-head">
        <span class="hc-title">üèÅ 1-ci Round ‚Äî Sƒ±ralama N…ôtic…ôsi</span>
        <div class="hc-badges">
          <span class="hc-badge blue">G√ºn 1‚Äì15</span>
          <span class="hc-badge gold">57-ci yer</span>
        </div>
      </div>
      <div class="rank-result-row">
        <div class="rr-item"><div class="rr-label">Sƒ±ra</div><div class="rr-val" style="color:var(--muted)">57-ci</div></div>
        <div class="rr-item"><div class="rr-label">Portfel g…ôliri</div><div class="rr-val pos">+8.42%</div></div>
        <div class="rr-item"><div class="rr-label">Qazanƒ±lan</div><div class="rr-val" style="color:var(--gold)">+842 coin</div></div>
        <div class="rr-item"><div class="rr-label">Round m√ºkafatƒ±</div><div class="rr-val" style="color:var(--muted)">‚Äî</div></div>
      </div>
      <div style="font-size:.76rem;color:var(--muted)">57-ci yer top 50-nin xaricind…ôdir ‚Äî bu raundda pul m√ºkafatƒ± yoxdur.</div>
    </div>

    <!-- Portfel h…ôr…ôk…ôtl…ôri -->
    <div class="history-card">
      <div class="hc-head">
        <span class="hc-title">üìä 1-ci Round ‚Äî Portfel H…ôr…ôk…ôtl…ôri</span>
        <span class="hc-badge blue">3 yenil…ôm…ô istifad…ô edildi</span>
      </div>

      <div style="font-size:.78rem;font-weight:700;color:var(--accent2);margin-bottom:.4rem">Portfel 1 ‚Äî G√ºn 1</div>
      <table class="hist-table">
        <thead><tr><th>Ticker</th><th>≈ûirk…ôt</th><th>Coin</th><th>Giri≈ü $</th><th>Pay</th></tr></thead>
        <tbody>
          <tr><td class="mono" style="color:var(--accent2)">AAPL</td><td>Apple Inc.</td><td class="mono">2,500</td><td class="mono">$213.49</td><td class="mono">50%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">NVDA</td><td>NVIDIA Corp.</td><td class="mono">2,000</td><td class="mono">$875.40</td><td class="mono">40%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">MSFT</td><td>Microsoft Corp.</td><td class="mono">500</td><td class="mono">$415.32</td><td class="mono">10%</td></tr>
        </tbody>
      </table>

      <div style="font-size:.78rem;font-weight:700;color:var(--accent2);margin:.85rem 0 .4rem">Portfel 2 ‚Äî G√ºn 5</div>
      <table class="hist-table">
        <thead><tr><th>Ticker</th><th>≈ûirk…ôt</th><th>Coin</th><th>Giri≈ü $</th><th>Pay</th></tr></thead>
        <tbody>
          <tr><td class="mono" style="color:var(--accent2)">TSLA</td><td>Tesla Inc.</td><td class="mono">3,000</td><td class="mono">$248.71</td><td class="mono">50%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">META</td><td>Meta Platforms</td><td class="mono">2,000</td><td class="mono">$508.72</td><td class="mono">33%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">AMD</td><td>Adv. Micro Devices</td><td class="mono">1,000</td><td class="mono">$174.23</td><td class="mono">17%</td></tr>
        </tbody>
      </table>

      <div style="font-size:.78rem;font-weight:700;color:var(--accent2);margin:.85rem 0 .4rem">Portfel 3 ‚Äî G√ºn 10</div>
      <table class="hist-table">
        <thead><tr><th>Ticker</th><th>≈ûirk…ôt</th><th>Coin</th><th>Giri≈ü $</th><th>Pay</th></tr></thead>
        <tbody>
          <tr><td class="mono" style="color:var(--accent2)">NVDA</td><td>NVIDIA Corp.</td><td class="mono">3,500</td><td class="mono">$891.20</td><td class="mono">50%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">AAPL</td><td>Apple Inc.</td><td class="mono">2,000</td><td class="mono">$218.30</td><td class="mono">29%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">AMZN</td><td>Amazon.com</td><td class="mono">1,500</td><td class="mono">$196.44</td><td class="mono">21%</td></tr>
        </tbody>
      </table>
    </div>

    <!-- BTC W1 -->
    <div class="history-card">
      <div class="hc-head"><span class="hc-title">‚Çø 1-ci Round ‚Äî BTC T…ôxminim</span></div>
      <div class="btc-hist-row">
        <div><div class="bhr-label">Tarix</div><div class="bhr-val">28.02.2026, 23:59</div></div>
        <div><div class="bhr-label">T…ôxminim</div><div class="bhr-val">$82,500</div></div>
        <div><div class="bhr-label">H…ôqiqi qiym…ôt</div><div class="bhr-val" style="color:var(--muted)">$79,340</div></div>
        <div><div class="bhr-label">F…ôrq</div><div class="bhr-result neg">‚àí$3,160 ‚Ä¢ M√ºkafat yoxdur</div></div>
      </div>
    </div>

    <!-- W1 Summary -->
    <div class="history-card">
      <div class="hc-head">
        <span class="hc-title">üìà 1-ci Round ‚Äî N…ôtic…ô</span>
        <button class="i-btn" onclick="openModal('earnModal1')" title="Qazanc m…ônb…ôyi">‚Ñπ</button>
      </div>
      <div class="week-summary">
        <div><div class="ws-label">Ba≈ülanƒüƒ±c balans</div><div class="ws-val">10,000 coin</div></div>
        <div><div class="ws-label">Round sonu balans</div><div class="ws-val" style="color:var(--accent)">10,842 coin</div></div>
        <div><div class="ws-label">Portfel g…ôliri</div><div class="ws-val pos">+842 ABB coin</div></div>
        <div><div class="ws-label">USD m√ºkafatƒ±</div><div class="ws-val" style="color:var(--muted)">$0</div></div>
        <div><div class="ws-label">BTC m√ºkafatƒ±</div><div class="ws-val" style="color:var(--muted)">$0</div></div>
      </div>
    </div>
  </div>

  <!-- ---- WEEK 2 ---- -->
  <div class="week-panel" id="panel-w2">

    <div class="history-card">
      <div class="hc-head">
        <span class="hc-title">üèÅ 2-ci Round ‚Äî Sƒ±ralama N…ôtic…ôsi</span>
        <div class="hc-badges">
          <span class="hc-badge blue">G√ºn 16‚Äì30</span>
          <span class="hc-badge green">12-ci yer</span>
        </div>
      </div>
      <div class="rank-result-row">
        <div class="rr-item"><div class="rr-label">Sƒ±ra</div><div class="rr-val rank-silver">12-ci</div></div>
        <div class="rr-item"><div class="rr-label">Portfel g…ôliri</div><div class="rr-val pos">+7.17%</div></div>
        <div class="rr-item"><div class="rr-label">Qazanƒ±lan coin</div><div class="rr-val" style="color:var(--gold)">+717 coin</div></div>
        <div class="rr-item"><div class="rr-label">Round m√ºkafatƒ±</div><div class="rr-val" style="color:var(--gold)">$30 üèÜ</div></div>
      </div>
      <div style="font-size:.76rem;color:var(--accent)">12-ci yer ‚Üí Round m√ºkafatƒ±: $30 (6‚Äì15 arasƒ±)</div>
    </div>

    <div class="history-card">
      <div class="hc-head">
        <span class="hc-title">üìä 2-ci Round ‚Äî Portfel H…ôr…ôk…ôtl…ôri</span>
        <span class="hc-badge blue">2 yenil…ôm…ô</span>
      </div>

      <div style="font-size:.78rem;font-weight:700;color:var(--accent2);margin-bottom:.4rem">Portfel 4 ‚Äî G√ºn 16</div>
      <table class="hist-table">
        <thead><tr><th>Ticker</th><th>≈ûirk…ôt</th><th>Coin</th><th>Giri≈ü $</th><th>Pay</th></tr></thead>
        <tbody>
          <tr><td class="mono" style="color:var(--accent2)">META</td><td>Meta Platforms</td><td class="mono">4,000</td><td class="mono">$521.18</td><td class="mono">46%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">NVDA</td><td>NVIDIA Corp.</td><td class="mono">3,000</td><td class="mono">$902.55</td><td class="mono">34%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">GOOG</td><td>Alphabet Inc.</td><td class="mono">1,700</td><td class="mono">$171.80</td><td class="mono">20%</td></tr>
        </tbody>
      </table>

      <div style="font-size:.78rem;font-weight:700;color:var(--accent2);margin:.85rem 0 .4rem">Portfel 5 ‚Äî G√ºn 20</div>
      <table class="hist-table">
        <thead><tr><th>Ticker</th><th>≈ûirk…ôt</th><th>Coin</th><th>Giri≈ü $</th><th>Pay</th></tr></thead>
        <tbody>
          <tr><td class="mono" style="color:var(--accent2)">AAPL</td><td>Apple Inc.</td><td class="mono">3,500</td><td class="mono">$219.74</td><td class="mono">41%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">AMD</td><td>Adv. Micro Devices</td><td class="mono">2,500</td><td class="mono">$181.60</td><td class="mono">29%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">MSFT</td><td>Microsoft Corp.</td><td class="mono">1,500</td><td class="mono">$421.90</td><td class="mono">18%</td></tr>
          <tr><td class="mono" style="color:var(--accent2)">JPM</td><td>JPMorgan Chase</td><td class="mono">1,000</td><td class="mono">$223.40</td><td class="mono">12%</td></tr>
        </tbody>
      </table>
    </div>

    <!-- BTC W2 -->
    <div class="history-card">
      <div class="hc-head"><span class="hc-title">‚Çø 2-ci Round ‚Äî BTC T…ôxminim</span><span class="hc-badge green">+$20 BTC M√ºkafatƒ± üèÜ</span></div>
      <div class="btc-hist-row winner">
        <div><div class="bhr-label">Tarix</div><div class="bhr-val">15.03.2026, 23:59</div></div>
        <div><div class="bhr-label">T…ôxminim</div><div class="bhr-val">$85,800 <span class="win-tag">∆èn yaxƒ±n!</span></div></div>
        <div><div class="bhr-label">H…ôqiqi qiym…ôt</div><div class="bhr-val" style="color:var(--accent)">$86,240</div></div>
        <div><div class="bhr-label">N…ôtic…ô</div><div class="bhr-result pos">F…ôrq: $440 ‚Üí <strong>+$20 USD m√ºkafat</strong></div></div>
      </div>
    </div>

    <!-- W2 Summary -->
    <div class="history-card">
      <div class="hc-head">
        <span class="hc-title">üìà 2-ci Round ‚Äî N…ôtic…ô</span>
        <button class="i-btn" onclick="openModal('earnModal2')" title="Qazanc m…ônb…ôyi">‚Ñπ</button>
      </div>
      <div class="week-summary">
        <div><div class="ws-label">Ba≈ülanƒüƒ±c balans</div><div class="ws-val">10,000 coin</div></div>
        <div><div class="ws-label">Round sonu balans</div><div class="ws-val" style="color:var(--accent)">10,717 coin</div></div>
        <div><div class="ws-label">Portfel g…ôliri</div><div class="ws-val pos">+717 ABB coin</div></div>
        <div><div class="ws-label">Round m√ºkafatƒ± (USD)</div><div class="ws-val" style="color:var(--gold)">$30 (12-ci yer)</div></div>
        <div><div class="ws-label">BTC m√ºkafatƒ± (USD)</div><div class="ws-val" style="color:var(--gold)">$20 (…ôn yaxƒ±n)</div></div>
      </div>
    </div>
  </div>

  <!-- ---- ROUND 3 ACTIVE ---- -->
  <div class="week-panel" id="panel-w3">

    <div class="history-card" style="border-color:var(--accent2)">
      <div class="hc-head">
        <span class="hc-title">‚ö° 3-c√º Round ‚Äî Aktiv (G√ºn 31‚Äì45)</span>
        <span class="hc-badge blue">Davam edir</span>
      </div>
      <div id="w3PortfolioDisplay">
        <div style="font-size:.84rem;color:var(--muted);padding:.8rem 0">
          H…ôl…ô portfel g√∂nd…ôrilm…ôyib. "S…ôhml…ôr" b√∂lm…ôsind…ôn portfel qurun.
        </div>
      </div>
    </div>

    <div class="history-card">
      <div class="hc-head"><span class="hc-title">‚Çø 3-c√º Round ‚Äî BTC T…ôxminim</span></div>
      <div id="w3BtcDisplay">
        <div style="font-size:.84rem;color:var(--muted);padding:.5rem 0">H…ôl…ô BTC t…ôxmini verilm…ôyib.</div>
      </div>
    </div>
  </div>

  <!-- ---- √úMUMI V∆èZƒ∞YY∆èT (separate tab) ---- -->
  <div class="week-panel" id="panel-wsum">
    <div class="history-card">
      <div class="hc-head">
        <span class="hc-title" style="display:inline-flex;align-items:center;gap:6px;">üìä √úmumi V…ôziyy…ôt<button class="i-btn" onclick="openModal('finalFormulaModal')" title="Final hesablama qaydasƒ±" style="animation:iblink 1.5s infinite;font-size:.6rem;">‚Ñπ</button><button class="i-btn" onclick="openModal('earnModalAll')" title="B√ºt√ºn qazanclar" style="font-size:.65rem;">üìã</button></span>
      </div>
      <div class="week-summary">
        <div><div class="ws-label">√úmumi ABB coin qazancƒ±</div><div class="ws-val pos">+1,559 coin</div></div>
        <div><div class="ws-label">ƒ∞≈ütirak etdiyim round sayƒ±</div><div class="ws-val">2 round</div></div>
        <div><div class="ws-label">Final balans</div><div class="ws-val" style="color:#0077cc;font-weight:800;">4,677 coin</div></div>
        <div><div class="ws-label">√úmumi USD m√ºkafatƒ±</div><div class="ws-val" style="color:var(--gold)">$50 USD</div></div>
        <div><div class="ws-label">3-c√º round</div><div class="ws-val" style="color:var(--muted)">Davam edir‚Ä¶</div></div>
      </div>
    </div>

    <div class="history-card">
      <div class="hc-head"><span class="hc-title">üìã Round-by-Round X√ºlas…ô</span></div>
      <table class="hist-table">
        <thead><tr><th>Round</th><th>Sƒ±ra</th><th>Coin qazancƒ±</th><th>USD m√ºkafatƒ±</th><th>BTC m√ºkafatƒ±</th></tr></thead>
        <tbody>
          <tr>
            <td class="mono">Round 1</td>
            <td class="mono" style="color:var(--muted)">57-ci</td>
            <td class="mono pos">+842 coin</td>
            <td class="mono" style="color:var(--muted)">$0</td>
            <td class="mono" style="color:var(--muted)">$0</td>
          </tr>
          <tr>
            <td class="mono">Round 2</td>
            <td class="mono rank-silver">12-ci</td>
            <td class="mono pos">+717 coin</td>
            <td class="mono" style="color:var(--gold)">$20</td>
            <td class="mono" style="color:var(--gold)">$20</td>
          </tr>
          <tr>
            <td class="mono">Round 3</td>
            <td class="mono" style="color:var(--muted)">‚Äî</td>
            <td class="mono" style="color:var(--muted)">davam edir</td>
            <td class="mono" style="color:var(--muted)">‚Äî</td>
            <td class="mono" style="color:var(--muted)">‚Äî</td>
          </tr>
        </tbody>
      </table>
      <div style="margin-top:.85rem;padding:.7rem .85rem;background:rgba(245,200,66,.06);border:1px solid rgba(245,200,66,.15);border-radius:var(--radius-sm);display:flex;gap:2rem;flex-wrap:wrap;">
        <div><div class="ws-label">Final balans</div><div class="ws-val" style="color:#0077cc">4,677</div></div>
        <div><div class="ws-label">Qazanƒ±lan USD</div><div class="ws-val" style="color:var(--gold)">$50</div></div>
      </div>
    </div>
  </div>
</div>

<!-- ==================== SCREEN: SIRALAMA ==================== -->
<div class="screen" id="screen-siralama">
  <div class="section-title">Sƒ±ralama</div>
  <div class="section-sub">ƒ∞≈ütirak√ßƒ±lar ABB coin balansƒ±na g√∂r…ô sƒ±ralanƒ±r. Hazƒ±rda 3-c√º rounddayƒ±q.</div>

  <div class="dashboard-tabs">
    <button class="dash-tab active" onclick="switchDashTab('round',this)">H…ôft…ôlik / Round</button>
    <button class="dash-tab" onclick="switchDashTab('final',this)">Final</button>
    <button class="dash-tab" onclick="switchDashTab('dostlar',this)">Dostlarƒ±m</button>
  </div>

  <div class="dash-panel active" id="panel-round">
    <div class="round-card">
      <div class="status-row">
        <span class="status-badge green">Round: 3/6</span>
        <span class="status-badge blue">Round 3 ‚Äî Davam edir</span>
        <button class="info-btn" onclick="openModal('roundPrizeModal')">‚Ñπ</button>
      </div>
      <div style="font-size:.78rem;color:var(--muted);margin-bottom:.85rem">90 g√ºnl√ºk yarƒ±≈ü ‚Äî 6 raunddan ibar…ôt (h…ôr raund ~15 g√ºn)</div>
      <div class="rounds-grid">
        <div class="round-dot done" onclick="showRoundHistory(1)" style="cursor:pointer;" title="1-ci Round n…ôtic…ôsin…ô bax"><div class="rd-num">1</div><div class="rd-label">üèÅ Bitdi</div></div>
        <div class="round-dot done" onclick="showRoundHistory(2)" style="cursor:pointer;" title="2-ci Round n…ôtic…ôsin…ô bax"><div class="rd-num">2</div><div class="rd-label">üèÅ Bitdi</div></div>
        <div class="round-dot current" onclick="showRoundHistory(3)" style="cursor:pointer;"><div class="rd-num">3</div><div class="rd-label">‚ö° Aktiv</div></div>
        <div class="round-dot"><div class="rd-num">4</div><div class="rd-label">G√∂zl…ôyir</div></div>
        <div class="round-dot"><div class="rd-num">5</div><div class="rd-label">G√∂zl…ôyir</div></div>
        <div class="round-dot"><div class="rd-num">6</div><div class="rd-label">G√∂zl…ôyir</div></div>
      </div>
    </div>
    <div class="round-card" id="roundHistoryCard">
      <div style="font-size:.9rem;font-weight:800;margin-bottom:.95rem;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.5rem;">
        <span id="roundCardTitle">üèÜ 3-c√º Round (Aktiv) ‚Äî ABB Coin Sƒ±ralamasƒ±</span>
        <span style="font-size:.7rem;color:var(--muted)">31,215 i≈ütirak√ßƒ±</span>
      </div>

      <!-- BTC result strip (shown for finished rounds) -->
      <div id="btcResultStrip" style="display:none;background:#f0f8f0;border:1px solid #a8d8a8;border-radius:10px;padding:.6rem .85rem;margin-bottom:.75rem;font-size:.76rem;display:none;">
        <div style="font-weight:700;color:#1a6a30;margin-bottom:.25rem;" id="btcResultTitle">‚Çø BTC Qiym…ôt Yarƒ±≈ümasƒ±</div>
        <div id="btcResultBody" style="color:#2a5a30;line-height:1.6;"></div>
      </div>

      <!-- My result strip (shown for finished rounds) -->
      <div id="myResultStrip" style="display:none;background:#e8f0fb;border:1px solid #a8c4e8;border-radius:10px;padding:.6rem .85rem;margin-bottom:.75rem;font-size:.76rem;">
        <div id="myResultBody" style="color:#1a3a6a;line-height:1.6;"></div>
      </div>

      <table class="leaderboard" id="roundLeaderboard"></table>
    </div>
  </div>

  <div class="dash-panel" id="panel-final">
    <div class="round-card">
      <div class="status-row">
        <span class="status-badge green">Final ‚Äì Top 200</span>
        <span class="status-badge blue">Yarƒ±≈ü m√ºdd…ôti: 90 g√ºn</span>
        <button class="info-btn" onclick="openModal('finalPrizeModal')">‚Ñπ</button>
      </div>
      <div style="font-size:.78rem;color:var(--muted)">90 g√ºnl√ºk yarƒ±≈ü sonunda …ôn yax≈üƒ± 200 i≈ütirak√ßƒ± final m√ºkafat fondundan pay alƒ±r.</div>
    </div>
    <div class="round-card">
      <div style="font-size:.9rem;font-weight:800;margin-bottom:.95rem;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.5rem;">
        <span>üèÜ Final √úmumi Sƒ±ralamasƒ± ‚Äî Final Balans</span>
        <span style="font-size:.7rem;color:var(--muted)">31,215 i≈ütirak√ßƒ±</span>
      </div>
      <table class="leaderboard" id="finalLeaderboard"></table>
    </div>
  </div>

  <div class="dash-panel" id="panel-dostlar">

  <!-- LOCKED STATE -->
  <div id="dp-lock" style="background:#ddeaf7;border:2px solid #1B75BB;border-radius:16px;text-align:center;padding:2.5rem 1.5rem;margin-bottom:1rem;">
    <div style="font-size:3rem;margin-bottom:.9rem;">üë•</div>
    <div style="font-size:1rem;font-weight:800;color:#0a3a6a;margin-bottom:.5rem;">Dostlarƒ±nƒ±zƒ± g√∂r√ºn</div>
    <div style="font-size:.8rem;color:#3a6090;margin-bottom:1.6rem;line-height:1.6;">Kontaktlarƒ±nƒ±zdakƒ± dostlarƒ±nƒ±zƒ±n<br>sƒ±ralamasƒ±nƒ± g√∂rm…ôk √º√ß√ºn icaz…ô verin.</div>
    <button onclick="loadFriends()" style="background:linear-gradient(135deg,#1B75BB,#0D5FA6);color:#fff;border:none;border-radius:14px;padding:14px 32px;font-size:.9rem;font-weight:700;cursor:pointer;font-family:'Roboto',sans-serif;box-shadow:0 6px 18px rgba(27,117,187,.4);display:inline-flex;align-items:center;gap:10px;">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" stroke="white" stroke-width="2.2" stroke-linecap="round"/><circle cx="9" cy="7" r="4" stroke="white" stroke-width="2.2"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" stroke="white" stroke-width="2.2" stroke-linecap="round"/></svg>
      Kontaktlara ƒ∞caz…ô Ver
    </button>
  </div>

  <!-- FRIENDS LIST -->
  <div id="dp-list" style="display:none;">
    <div style="font-size:.72rem;color:#1a4a7a;margin-bottom:.9rem;padding:.5rem .8rem;background:#c8dff5;border-radius:10px;text-align:center;border:1px solid #90b8d8;">üì± Kontaktlarƒ±nƒ±zdan <strong>10 n…ôf…ôr</strong> InvestArena-dadƒ±r</div>
    <div style="border-radius:14px;overflow:hidden;border:1px solid #b0cce0;">
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid #dbeaf5;background:#fff;">
        <div style="width:28px;font-weight:800;color:#c89a00;font-size:.9rem;text-align:center;flex-shrink:0;">ü•á</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#f5c842,#e8a800);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">√ú</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#0a2040;">√úlvi Abbaslƒ±</div><div style="font-size:.68rem;color:#6a8aa0;">Dostum</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#0a5fa0;text-align:right;flex-shrink:0;">15,840<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid #dbeaf5;background:#f8fbff;">
        <div style="width:28px;font-weight:800;color:#5a7090;font-size:.85rem;text-align:center;flex-shrink:0;">2</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#1976d2,#0d47a1);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">F</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#0a2040;">Firuz Manafov</div><div style="font-size:.68rem;color:#6a8aa0;">Dostum</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#0a5fa0;text-align:right;flex-shrink:0;">13,210<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid #dbeaf5;background:#e0f0ff;border-left:3px solid #1B75BB;">
        <div style="width:28px;font-weight:800;color:#1B75BB;font-size:.85rem;text-align:center;flex-shrink:0;">3</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#1B75BB,#0D5FA6);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">S</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#1B75BB;">Siz <span style="background:#1B75BB;color:#fff;font-size:.5rem;font-weight:800;padding:2px 6px;border-radius:999px;margin-left:4px;vertical-align:middle;">Sƒ∞Z</span></div><div style="font-size:.68rem;color:#6a8aa0;">M…ôn</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#1B75BB;text-align:right;flex-shrink:0;">11,559<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid #dbeaf5;background:#fff;">
        <div style="width:28px;font-weight:700;color:#5a7090;font-size:.85rem;text-align:center;flex-shrink:0;">4</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#26a69a,#00695c);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">K</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#0a2040;">K…ônan Q…ôdirov</div><div style="font-size:.68rem;color:#6a8aa0;">Dostum</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#0a5fa0;text-align:right;flex-shrink:0;">10,820<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid #dbeaf5;background:#f8fbff;">
        <div style="width:28px;font-weight:700;color:#5a7090;font-size:.85rem;text-align:center;flex-shrink:0;">5</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#7b1fa2,#4a148c);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">V</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#0a2040;">V√ºqar M…ômm…ôdov</div><div style="font-size:.68rem;color:#6a8aa0;">Dostum</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#0a5fa0;text-align:right;flex-shrink:0;">9,440<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid #dbeaf5;background:#fff;">
        <div style="width:28px;font-weight:700;color:#5a7090;font-size:.85rem;text-align:center;flex-shrink:0;">6</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#e53935,#b71c1c);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">G</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#0a2040;">G√ºnel H√ºseynova</div><div style="font-size:.68rem;color:#6a8aa0;">ƒ∞≈ü yolda≈üƒ±</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#0a5fa0;text-align:right;flex-shrink:0;">8,175<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid #dbeaf5;background:#f8fbff;">
        <div style="width:28px;font-weight:700;color:#5a7090;font-size:.85rem;text-align:center;flex-shrink:0;">7</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#f57c00,#e65100);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">N</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#0a2040;">Nigar ∆èliyeva</div><div style="font-size:.68rem;color:#6a8aa0;">ƒ∞≈ü yolda≈üƒ±</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#0a5fa0;text-align:right;flex-shrink:0;">7,390<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid #dbeaf5;background:#fff;">
        <div style="width:28px;font-weight:700;color:#5a7090;font-size:.85rem;text-align:center;flex-shrink:0;">8</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#00838f,#006064);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">R</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#0a2040;">Rauf ƒ∞smayƒ±lov</div><div style="font-size:.68rem;color:#6a8aa0;">ƒ∞≈ü yolda≈üƒ±</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#0a5fa0;text-align:right;flex-shrink:0;">6,850<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;border-bottom:1px solid #dbeaf5;background:#f8fbff;">
        <div style="width:28px;font-weight:700;color:#5a7090;font-size:.85rem;text-align:center;flex-shrink:0;">9</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#558b2f,#33691e);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">S</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#0a2040;">Sevinc N…ôsirova</div><div style="font-size:.68rem;color:#6a8aa0;">Dostum</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#0a5fa0;text-align:right;flex-shrink:0;">5,920<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
      <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;background:#fff;">
        <div style="width:28px;font-weight:700;color:#5a7090;font-size:.85rem;text-align:center;flex-shrink:0;">10</div>
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#c62828,#8d1a1a);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:15px;flex-shrink:0;">T</div>
        <div style="flex:1;min-width:0;"><div style="font-size:.82rem;font-weight:700;color:#0a2040;">Tural ∆èhm…ôdov</div><div style="font-size:.68rem;color:#6a8aa0;">ƒ∞≈ü yolda≈üƒ±</div></div>
        <div style="font-size:.8rem;font-weight:700;color:#0a5fa0;text-align:right;flex-shrink:0;">4,610<br><span style="font-size:.6rem;font-weight:400;color:#8aa0b0;">coin</span></div>
      </div>
    </div>
  </div>

</div>
</div>

<!-- ==================== SCREEN: X∆èB∆èRL∆èR ==================== -->
<div class="screen" id="screen-xeberler">
  <div class="section-title">X…ôb…ôrl…ôr</div>
  <div class="section-sub">Maliyy…ô d√ºnyasƒ±ndan son x…ôb…ôrl…ôr</div>

  <div style="display:flex;flex-direction:column;gap:0;">

    <div style="display:flex;align-items:center;gap:12px;padding:13px 0;border-bottom:1px solid var(--border);cursor:pointer;" onclick="">
      <div style="width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#1565c0,#0d47a1);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:22px;">üè¶</div>
      <div style="flex:1;min-width:0;">
        <div style="font-size:.84rem;font-weight:700;color:var(--text);line-height:1.35;margin-bottom:5px;">Fed faiz q…ôrarƒ±nƒ± a√ßƒ±qladƒ±: d…ôyi≈üiklik yoxdur</div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span style="font-size:.68rem;color:var(--accent2);font-weight:600;background:rgba(0,153,255,.1);border:1px solid rgba(0,153,255,.2);border-radius:4px;padding:1px 6px;">M…ôrk…ôzi Bank</span>
          <span style="font-size:.68rem;color:var(--muted);">18 Fev 2026</span>
        </div>
      </div>
      <span style="color:var(--muted);font-size:18px;flex-shrink:0;">‚Ä∫</span>
    </div>

    <div style="display:flex;align-items:center;gap:12px;padding:13px 0;border-bottom:1px solid var(--border);cursor:pointer;" onclick="">
      <div style="width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#b71c1c,#c62828);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:22px;">‚öõÔ∏è</div>
      <div style="flex:1;min-width:0;">
        <div style="font-size:.84rem;font-weight:700;color:var(--text);line-height:1.35;margin-bottom:5px;">AB≈û v…ô ƒ∞ran n√ºv…ô m√ºzakir…ôsi yenid…ôn ba≈üladƒ±</div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span style="font-size:.68rem;color:var(--warn);font-weight:600;background:rgba(255,107,53,.1);border:1px solid rgba(255,107,53,.2);border-radius:4px;padding:1px 6px;">Geosiyas…ôt</span>
          <span style="font-size:.68rem;color:var(--muted);">15 Fev 2026</span>
        </div>
      </div>
      <span style="color:var(--muted);font-size:18px;flex-shrink:0;">‚Ä∫</span>
    </div>

    <div style="display:flex;align-items:center;gap:12px;padding:13px 0;border-bottom:1px solid var(--border);cursor:pointer;" onclick="">
      <div style="width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#f57f17,#f9a825);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:22px;">‚Çø</div>
      <div style="flex:1;min-width:0;">
        <div style="font-size:.84rem;font-weight:700;color:var(--text);line-height:1.35;margin-bottom:5px;">Bitcoin 90.000 $ h…ôddini ke√ßdi ‚Äî analitikl…ôr n…ô deyir?</div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span style="font-size:.68rem;color:var(--gold);font-weight:600;background:rgba(245,200,66,.1);border:1px solid rgba(245,200,66,.2);border-radius:4px;padding:1px 6px;">Kripto</span>
          <span style="font-size:.68rem;color:var(--muted);">12 Fev 2026</span>
        </div>
      </div>
      <span style="color:var(--muted);font-size:18px;flex-shrink:0;">‚Ä∫</span>
    </div>

    <div style="display:flex;align-items:center;gap:12px;padding:13px 0;border-bottom:1px solid var(--border);cursor:pointer;" onclick="">
      <div style="width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#1b5e20,#2e7d32);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:22px;">üìà</div>
      <div style="flex:1;min-width:0;">
        <div style="font-size:.84rem;font-weight:700;color:var(--text);line-height:1.35;margin-bottom:5px;">S&amp;P 500 rekord h…ôdd…ô √ßatdƒ± ‚Äî texnologiya sektorunu kim s√ºr√ºkl…ôdi?</div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span style="font-size:.68rem;color:var(--accent);font-weight:600;background:rgba(0,229,160,.1);border:1px solid rgba(0,229,160,.2);border-radius:4px;padding:1px 6px;">Bazarlar</span>
          <span style="font-size:.68rem;color:var(--muted);">9 Fev 2026</span>
        </div>
      </div>
      <span style="color:var(--muted);font-size:18px;flex-shrink:0;">‚Ä∫</span>
    </div>

    <div style="display:flex;align-items:center;gap:12px;padding:13px 0;border-bottom:1px solid var(--border);cursor:pointer;" onclick="">
      <div style="width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#1565c0,#0d47a1);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:22px;">üèôÔ∏è</div>
      <div style="flex:1;min-width:0;">
        <div style="font-size:.84rem;font-weight:700;color:var(--text);line-height:1.35;margin-bottom:5px;">Bakƒ±da 13-c√º D√ºnya ≈û…ôh…ôrsalma Forumu ke√ßiril…ôc…ôk ‚Äî investorlar √º√ß√ºn imkanlar</div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span style="font-size:.68rem;color:#1B75BB;font-weight:600;background:rgba(27,117,187,.1);border:1px solid rgba(27,117,187,.2);border-radius:4px;padding:1px 6px;">Az…ôrbaycan</span>
          <span style="font-size:.68rem;color:var(--muted);">14 Aprel 2026</span>
        </div>
      </div>
      <span style="color:var(--muted);font-size:18px;flex-shrink:0;">‚Ä∫</span>
    </div>

    <div style="display:flex;align-items:center;gap:12px;padding:13px 0;border-bottom:1px solid var(--border);cursor:pointer;" onclick="">
      <div style="width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#00695c,#004d40);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:22px;">üå±</div>
      <div style="flex:1;min-width:0;">
        <div style="font-size:.84rem;font-weight:700;color:var(--text);line-height:1.35;margin-bottom:5px;">Ya≈üƒ±l istiqraz bazarƒ± geni≈ül…ônir ‚Äî Avropa fondu $50 mlrd h…ôcmini ke√ßdi</div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span style="font-size:.68rem;color:var(--accent);font-weight:600;background:rgba(0,229,160,.1);border:1px solid rgba(0,229,160,.2);border-radius:4px;padding:1px 6px;">Bazarlar</span>
          <span style="font-size:.68rem;color:var(--muted);">22 Aprel 2026</span>
        </div>
      </div>
      <span style="color:var(--muted);font-size:18px;flex-shrink:0;">‚Ä∫</span>
    </div>

    <div style="display:flex;align-items:center;gap:12px;padding:13px 0;border-bottom:1px solid var(--border);cursor:pointer;" onclick="">
      <div style="width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#6a1b9a,#4a148c);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:22px;">ü§ñ</div>
      <div style="flex:1;min-width:0;">
        <div style="font-size:.84rem;font-weight:700;color:var(--text);line-height:1.35;margin-bottom:5px;">S√ºni intellekt fondu rekord qƒ±rƒ±r ‚Äî Nvidia hiss…ôl…ôri 8% artdƒ±</div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span style="font-size:.68rem;color:var(--warn);font-weight:600;background:rgba(255,107,53,.1);border:1px solid rgba(255,107,53,.2);border-radius:4px;padding:1px 6px;">Texnologiya</span>
          <span style="font-size:.68rem;color:var(--muted);">5 May 2026</span>
        </div>
      </div>
      <span style="color:var(--muted);font-size:18px;flex-shrink:0;">‚Ä∫</span>
    </div>

    <div style="display:flex;align-items:center;gap:12px;padding:13px 0;cursor:pointer;" onclick="">
      <div style="width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#c62828,#b71c1c);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:22px;">üõ¢Ô∏è</div>
      <div style="flex:1;min-width:0;">
        <div style="font-size:.84rem;font-weight:700;color:var(--text);line-height:1.35;margin-bottom:5px;">Neft qiym…ôti 90 dollarƒ± ke√ßdi ‚Äî OPEC+ istehsalƒ± azaltma q…ôrarƒ±</div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span style="font-size:.68rem;color:var(--warn);font-weight:600;background:rgba(255,107,53,.1);border:1px solid rgba(255,107,53,.2);border-radius:4px;padding:1px 6px;">Enerji</span>
          <span style="font-size:.68rem;color:var(--muted);">18 May 2026</span>
        </div>
      </div>
      <span style="color:var(--muted);font-size:18px;flex-shrink:0;">‚Ä∫</span>
    </div>

  
    <!-- X…ôb…ôr 5 -->




  </div>
</div>


</main>

<!-- ====== EARN MODAL W1 ====== -->
<div class="modal-overlay" id="earnModal1">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('earnModal1')">‚úï</button>
    <div class="modal-title">üìä 1-ci Round ‚Äî Qazanc M…ônb…ôyi</div>
    <div class="earn-modal-row"><span class="erm-src">Portfel g…ôliri (8.42% artƒ±m)</span><span class="erm-amt pos">+842 ABB coin</span></div>
    <div class="earn-modal-row"><span class="erm-src">Round m√ºkafatƒ± (57-ci yer ‚Äî top 50 xarici)</span><span class="erm-amt" style="color:var(--muted)">$0</span></div>
    <div class="earn-modal-row"><span class="erm-src">BTC t…ôxmini m√ºkafatƒ± (f…ôrq $3,160 ‚Äî qalib deyil)</span><span class="erm-amt" style="color:var(--muted)">$0</span></div>
    <div style="margin-top:.85rem;padding-top:.85rem;border-top:1px solid var(--border);display:flex;justify-content:space-between;font-weight:700;font-size:.86rem;">
      <span>Round √ºmumi ABB coin qazancƒ±</span><span style="color:var(--accent)">+842 coin</span>
    </div>
    <div style="margin-top:.5rem;display:flex;justify-content:space-between;font-size:.82rem;">
      <span style="color:var(--muted)">USD m√ºkafatƒ±</span><span style="color:var(--muted)">$0</span>
    </div>
  </div>
</div>

<!-- ====== EARN MODAL W2 ====== -->
<div class="modal-overlay" id="earnModal2">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('earnModal2')">‚úï</button>
    <div class="modal-title">üìä 2-ci Round ‚Äî Qazanc M…ônb…ôyi</div>
    <div class="earn-modal-row"><span class="erm-src">Portfel g…ôliri (7.17% artƒ±m)</span><span class="erm-amt pos">+717 ABB coin</span></div>
    <div class="earn-modal-row"><span class="erm-src">Round m√ºkafatƒ± (12-ci yer ‚Äî 6‚Äì15 arasƒ±)</span><span class="erm-amt" style="color:var(--gold)">+$30 USD</span></div>
    <div class="earn-modal-row"><span class="erm-src">BTC t…ôxmini ‚Äî …ôn yaxƒ±n proqnoz ($85,800 vs $86,240)</span><span class="erm-amt" style="color:var(--gold)">+$20 USD</span></div>
    <div style="margin-top:.85rem;padding-top:.85rem;border-top:1px solid var(--border);display:flex;justify-content:space-between;font-weight:700;font-size:.86rem;">
      <span>Round √ºmumi ABB coin qazancƒ±</span><span style="color:var(--accent)">+717 coin</span>
    </div>
    <div style="margin-top:.5rem;display:flex;justify-content:space-between;font-size:.82rem;">
      <span style="color:var(--muted)">USD m√ºkafatƒ± (k√∂√ß√ºr√ºl√ºr)</span><span style="color:var(--gold);font-weight:700">+$50 USD</span>
    </div>
  </div>
</div>

<!-- ====== ALL EARNINGS MODAL ====== -->
<div class="modal-overlay" id="earnModalAll">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('earnModalAll')">‚úï</button>
    <div class="modal-title">üèÜ √úmumi Qazanc M…ônb…ôl…ôri</div>
    <div style="font-size:.75rem;color:var(--muted);margin-bottom:.85rem">1-ci rounddan bu g√ºn…ô q…ôd…ôr b√ºt√ºn qazanclar</div>
    <div class="earn-modal-row"><span class="erm-src">1-ci round ‚Äî portfel g…ôliri (+8.42%)</span><span class="erm-amt pos">+842 coin</span></div>
    <div class="earn-modal-row"><span class="erm-src">1-ci round ‚Äî BTC t…ôxmini (qalib deyil)</span><span class="erm-amt" style="color:var(--muted)">$0</span></div>
    <div class="earn-modal-row"><span class="erm-src">1-ci round ‚Äî round (57-ci yer)</span><span class="erm-amt" style="color:var(--muted)">$0</span></div>
    <div class="earn-modal-row"><span class="erm-src">2-ci round ‚Äî portfel g…ôliri (+7.17%)</span><span class="erm-amt pos">+717 coin</span></div>
    <div class="earn-modal-row"><span class="erm-src">2-ci round ‚Äî round (12-ci yer, 6‚Äì15 arasƒ±)</span><span class="erm-amt" style="color:var(--gold)">+$30 USD</span></div>
    <div class="earn-modal-row"><span class="erm-src">2-ci round ‚Äî BTC …ôn yaxƒ±n t…ôxmin ($85,800 ‚Üí $86,240)</span><span class="erm-amt" style="color:var(--gold)">+$20 USD</span></div>
    <div class="earn-modal-row"><span class="erm-src">3-c√º round</span><span class="erm-amt" style="color:var(--muted)">Davam edir‚Ä¶</span></div>
    <div style="margin-top:.85rem;padding-top:.85rem;border-top:1px solid var(--border);">
      <div style="display:flex;justify-content:space-between;font-weight:700;font-size:.86rem;margin-bottom:.4rem">
        <span>√úmumi ABB coin qazancƒ±</span><span style="color:var(--accent)">+1,559 coin</span>
      </div>
      <div style="display:flex;justify-content:space-between;font-size:.84rem;font-weight:700;">
        <span style="color:var(--muted)">√úmumi USD m√ºkafatƒ±</span><span style="color:var(--gold)">+$50 USD</span>
      </div>
    </div>
  </div>
</div>

<!-- ====== ROUND PRIZE MODAL ====== -->
<div class="modal-overlay" id="roundPrizeModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('roundPrizeModal')">‚úï</button>
    <div class="modal-title">üèÜ Round M√ºkafatlarƒ± (h…ôr round, Top 50)</div>
    <table class="prize-table">
      <thead><tr><th>Sƒ±ra</th><th>M√ºkafat</th><th>√úmumi</th></tr></thead>
      <tbody>
        <tr><td>ü•á 1-ci yer</td><td>$100</td><td>$100</td></tr>
        <tr><td>ü•à 2-ci yer</td><td>$50</td><td>$50</td></tr>
        <tr><td>3-c√º yer</td><td>$50</td><td>$50</td></tr>
        <tr><td>4-c√º yer</td><td>$50</td><td>$50</td></tr>
        <tr><td>5-ci yer</td><td>$50</td><td>$50</td></tr>
        <tr><td>6‚Äì15-ci yer</td><td>$30</td><td>$300</td></tr>
        <tr><td>16‚Äì25-ci yer</td><td>$20</td><td>$200</td></tr>
        <tr><td>26‚Äì50-ci yer</td><td>$10</td><td>$250</td></tr>
      </tbody>
    </table>
    <div class="prize-total"><span>C…ômi (1 round):</span><span>$1,050</span></div>
    <div style="margin-top:.45rem;font-size:.74rem;color:var(--muted)">√ó 6 raund = $6,300 √ºmumi round m√ºkafat fondu</div>
  </div>
</div>

<!-- ====== FINAL PRIZE MODAL ====== -->
<div class="modal-overlay" id="finalPrizeModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('finalPrizeModal')">‚úï</button>
    <div class="modal-title">üèÜ Final M√ºkafatlarƒ± (Top 200)</div>
    <table class="prize-table">
      <thead><tr><th>Sƒ±ra</th><th>M√ºkafat</th><th>√úmumi</th></tr></thead>
      <tbody>
        <tr><td>ü•á 1-ci yer</td><td>$1,000</td><td>$1,000</td></tr>
        <tr><td>ü•à 2-ci yer</td><td>$600</td><td>$600</td></tr>
        <tr><td>ü•â 3-c√º yer</td><td>$400</td><td>$400</td></tr>
        <tr><td>4‚Äì10-cu yer</td><td>$300</td><td>$2,100</td></tr>
        <tr><td>11‚Äì25-ci yer</td><td>$200</td><td>$3,000</td></tr>
        <tr><td>26‚Äì50-ci yer</td><td>$120</td><td>$3,000</td></tr>
        <tr><td>51‚Äì99-cu yer</td><td>$60</td><td>$2,940</td></tr>
        <tr><td>100‚Äì200-c√º yer</td><td>$10</td><td>$1,000</td></tr>
      </tbody>
    </table>
    <div class="prize-total"><span>Final C…ômi:</span><span>$14,040</span></div>
  </div>
</div>

<!-- ====== BTC MODAL ====== -->
<div class="modal-overlay" id="btcModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('btcModal')">‚úï</button>
    <div class="modal-title" style="display:flex;align-items:center;gap:8px;padding-right:36px;">‚Çø BTC Qiym…ôt T…ôxmini<button onclick="openModal('btcRulesModal')" style="background:none;border:1.5px solid var(--accent2);border-radius:50%;width:22px;height:22px;color:var(--accent2);cursor:pointer;font-size:.72rem;display:flex;align-items:center;justify-content:center;font-family:serif;animation:iblink 1.5s infinite;flex-shrink:0;margin-left:4px;">‚Ñπ</button></div>
    <div style="font-size:.78rem;color:var(--muted);margin-bottom:.95rem">∆èn yaxƒ±n proqnozu ver…ôn…ô <strong style="color:var(--gold)">+$20 USD</strong> m√ºkafat!</div>
    <div class="btc-date-banner">
      <div class="dl">üìÖ Proqnoz tarixi (sabit)</div>
      <div class="dv">31 Mart 2026, √á…ôr≈ü…ônb…ô ax≈üamƒ±</div>
      <div class="tv">Saat 23:59 UTC+4 ‚Äî BTC/USD qiym…ôti n…ô q…ôd…ôr olacaq?</div>
    </div>
    <div id="btcSuccess" class="success-msg">‚úÖ Proqnozunuz 3-c√º round √º√ß√ºn qeyd…ô alƒ±ndƒ±!</div>
    <div id="btcForm">
      <div class="btc-price-row">
        <div>
          <label class="form-label">Sizin BTC proqnozunuz ($)</label>
          <input class="form-input" type="number" id="btcPrice" placeholder="m…ôs: 90000.25" min="0" step="0.01" style="min-height:52px">
        </div>
        <div class="btc-mock-box">
          <div class="bml">üìä Cari qiym…ôt</div>
          <div class="bmp">$88,420</div>
          <div class="bmc pos">+4.73% (g√ºn …ôrzind…ô)</div>
        </div>
      </div>
      <button class="btn" onclick="submitBTC()" style="width:100%">Proqnozu G√∂nd…ôr</button>
    </div>
  </div>
</div>

<!-- ====== BTC RULES MODAL ====== -->
<div class="modal-overlay" id="btcRulesModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('btcRulesModal')">‚úï</button>
    <div class="modal-title">‚Çø BTC Proqnozu ‚Äî Qaydalar</div>
    <div style="font-size:.82rem;color:var(--muted);line-height:1.65;display:flex;flex-direction:column;gap:.75rem;">
      <div style="background:rgba(0,153,255,.07);border:1px solid rgba(0,153,255,.2);border-radius:var(--radius-sm);padding:.75rem;">
        <div style="font-size:.76rem;font-weight:700;color:var(--accent2);margin-bottom:.35rem">üìÖ Proqnoz tarixi</div>
        <div>31 Mart 2026, saat 23:59 (UTC+4) ‚Äî BTC/USD qiym…ôti n…ô q…ôd…ôr olacaq?</div>
      </div>
      <div style="background:rgba(245,200,66,.06);border:1px solid rgba(245,200,66,.18);border-radius:var(--radius-sm);padding:.75rem;">
        <div style="font-size:.76rem;font-weight:700;color:var(--gold);margin-bottom:.35rem">üèÜ M√ºkafat</div>
        <div>∆èn yaxƒ±n proqnozu ver…ôn i≈ütirak√ßƒ± <strong style="color:var(--gold)">+$20 USD</strong> m√ºkafat qazanƒ±r.</div>
      </div>
      <div style="background:rgba(0,229,160,.05);border:1px solid rgba(0,229,160,.15);border-radius:var(--radius-sm);padding:.75rem;">
        <div style="font-size:.76rem;font-weight:700;color:var(--accent);margin-bottom:.35rem">üìã Qaydalar</div>
        <ul style="list-style:none;display:flex;flex-direction:column;gap:.4rem;">
          <li>‚Ä¢ Yarƒ±≈ü …ôrzind…ô <strong>8 d…ôf…ô</strong> f…ôrqli vaxtda proqnoz verm…ôk olar.</li>
          <li>‚Ä¢ Proqnozunuz …ôn gec <strong>t…ôxmin tarixind…ôn 1 g√ºn √∂nc…ô</strong> edilm…ôlidir.</li>
          <li>‚Ä¢ Proqnoz g√∂nd…ôrildikd…ôn sonra n√∂vb…ôti proqnoza q…ôd…ôr <strong>d…ôyi≈üdirilmir</strong>.</li>
          <li>‚Ä¢ Qiym…ôt q…ôpik d…ôqiqliyin…ô q…ôd…ôr daxil edil…ô bil…ôr (m…ôs: 90000.25).</li>
          <li>‚Ä¢ B…ôrab…ôrlik halƒ±nda proqnozu <strong>…ôvv…ôl ver…ôn</strong> qalib sayƒ±lƒ±r.</li>
          <li>‚Ä¢ N…ôtic…ô round sonunda a√ßƒ±qlanƒ±r.</li>
        </ul>
      </div>
    </div>
  </div>
</div>


<!-- ====== FINAL FORMULA MODAL ====== -->
<div class="modal-overlay" id="finalFormulaModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('finalFormulaModal')">‚úï</button>
    <div class="modal-title">üìä Final Balans ‚Äî Hesablama Qaydasƒ±</div>
    <div style="font-size:.82rem;color:var(--muted);line-height:1.65;display:flex;flex-direction:column;gap:.75rem;">

      <div style="background:rgba(0,119,204,.07);border:1px solid rgba(0,119,204,.2);border-radius:var(--radius-sm);padding:.8rem;">
        <div style="font-size:.75rem;font-weight:700;color:#0077cc;margin-bottom:.4rem;">üìê Formula</div>
        <div style="font-family:'Roboto',sans-serif;font-size:.8rem;color:#1a2540;line-height:1.7;">
          <strong>Round N…ôtic…ôsi (ri)</strong> = Round sonu balans ‚àí 10,000<br>
          <strong>Final balans</strong> = (Œ£ri √∑ n) √ó 6<br>
          <span style="font-size:.72rem;color:#5a7090;">n = i≈ütirak etdiyiniz round sayƒ±, 6 = √ºmumi round sayƒ±</span>
        </div>
      </div>

      <div style="background:rgba(0,229,160,.06);border:1px solid rgba(0,229,160,.15);border-radius:var(--radius-sm);padding:.8rem;">
        <div style="font-size:.75rem;font-weight:700;color:#0a7a4a;margin-bottom:.5rem;">üßÆ M…ônim hesabƒ±m</div>
        <div style="display:flex;flex-direction:column;gap:.3rem;font-size:.78rem;color:#1a2540;">
          <div style="display:flex;justify-content:space-between;"><span>Round 1 n…ôtic…ôsi (10,842 ‚àí 10,000)</span><span style="font-weight:700;color:#16a34a;">+842</span></div>
          <div style="display:flex;justify-content:space-between;"><span>Round 2 n…ôtic…ôsi (10,717 ‚àí 10,000)</span><span style="font-weight:700;color:#16a34a;">+717</span></div>
          <div style="border-top:1px solid rgba(0,229,160,.2);margin:.3rem 0;"></div>
          <div style="display:flex;justify-content:space-between;"><span>Œ£ri (c…ôm)</span><span style="font-weight:700;">1,559</span></div>
          <div style="display:flex;justify-content:space-between;"><span>ƒ∞≈ütirak etdiyim round (n)</span><span style="font-weight:700;">2</span></div>
          <div style="display:flex;justify-content:space-between;"><span>(1,559 √∑ 2) √ó 6</span><span style="font-weight:700;color:#0077cc;font-size:.85rem;">= 4,677</span></div>
        </div>
      </div>

      <div style="background:rgba(27,117,187,.07);border:1px solid rgba(27,117,187,.2);border-radius:var(--radius-sm);padding:.7rem .8rem;display:flex;justify-content:space-between;align-items:center;">
        <span style="font-size:.8rem;font-weight:700;color:#0a3a6a;">Final Balansƒ±m</span>
        <span style="font-size:1.1rem;font-weight:800;color:#0077cc;">4,677 ABB coin</span>
      </div>

      <div style="font-size:.7rem;color:#7a90a0;line-height:1.5;padding:.4rem 0;">
        üí° Bu mexanizm gec qo≈üulan i≈ütirak√ßƒ±larƒ±n …ôdal…ôtli ≈üansƒ±nƒ± qoruyur ‚Äî orta performans 6 rounda ekvivalent olur.
      </div>
    </div>
  </div>
</div>


<button class="float-btn" onclick="openBtcModal()">
  <span class="bi">‚Çø</span><span class="be">T…ôxmin et</span>
</button>
</div>

<!-- ABB SHELL -->
<div id="shell">
  <div class="sb">
    <span class="sb-time" id="abbTime">9:41</span>
    <div class="sb-icons">
      <svg width="16" height="11" viewBox="0 0 16 12"><rect x="0" y="3" width="3" height="9" rx="1" fill="#7a90a0" opacity=".7"/><rect x="4.5" y="2" width="3" height="10" rx="1" fill="#5a7090" opacity=".8"/><rect x="9" y="0" width="3" height="12" rx="1" fill="#3a6090"/><rect x="13.5" y="0" width="2.5" height="12" rx="1" fill="#1B75BB"/></svg>
      <svg width="16" height="11" viewBox="0 0 20 13"><path d="M10 2C13.5 2 16.5 3.8 18.6 6.2L20 4.7C17.5 1.9 14 0 10 0S2.5 1.9 0 4.7L1.4 6.2C3.5 3.8 6.5 2 10 2z" fill="#1B75BB"/><path d="M10 5.5C12.1 5.5 14 6.5 15.4 8L16.8 6.5C15 4.7 12.6 3.5 10 3.5S5 4.7 3.2 6.5L4.6 8C6 6.5 7.9 5.5 10 5.5z" fill="#3a6090" opacity=".9"/><circle cx="10" cy="11.5" r="1.8" fill="#1B75BB"/></svg>
      <svg width="26" height="12" viewBox="0 0 26 12"><rect x="0" y="1" width="22" height="10" rx="3" stroke="#7a90a0" stroke-width="1" fill="none" opacity=".7"/><rect x="22.5" y="3.5" width="2.5" height="5" rx="1" fill="#7a90a0" opacity=".5"/><rect x="1.5" y="2.5" width="17" height="7" rx="2" fill="#1B75BB"/></svg>
    </div>
  </div>

  <!-- HOME SCREEN -->
  <div class="scr show" id="scr-home">
    <div class="h-hdr">
      <div class="h-user">
        <div class="h-ava">üê±</div>
        <div><div class="h-name">Salam, √úlvi. üòä</div><div class="h-sub">Sizi yenid…ôn g√∂rm…ôk xo≈üdur</div></div>
      </div>
      <div class="h-acts">
        <div class="h-ic"><svg width="17" height="17" viewBox="0 0 24 24" fill="none"><path d="M12 3C8.5 3 5.7 5 4.4 8H2L0 17h24L22 8h-2.4C18.3 5 15.5 3 12 3z" stroke="#5a7090" stroke-width="1.5" stroke-linejoin="round"/><path d="M9 21a3 3 0 006 0" stroke="#666" stroke-width="1.5"/></svg></div>
        <div class="h-ic"><svg width="17" height="17" viewBox="0 0 24 24" fill="none"><path d="M18 8a6 6 0 00-12 0c0 7-3 9-3 9h18s-3-2-3-9" stroke="#5a7090" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M13.73 21a2 2 0 01-3.46 0" stroke="#666" stroke-width="1.5"/></svg></div>
      </div>
    </div>
    <div class="htabs">
      <div class="htab on">Kartlar</div><div class="htab">Hesablar</div><div class="htab">Kreditl…ôr</div><div class="htab">Depozitl…ôr</div>
    </div>
    <div class="h-body">
      <div class="bcard-wrap">
        <div class="bcard">
          <div class="bc-type">AZN PLATINUM</div>
          <div class="bc-bal"><span>‚óè‚óè‚óè‚óè</span><svg width="18" height="13" viewBox="0 0 20 14"><circle cx="6" cy="7" r="6" fill="rgba(0,0,0,.25)"/><circle cx="14" cy="7" r="6" fill="rgba(0,0,0,.12)"/></svg></div>
          <div class="bc-row"><span class="bc-visa">VISA</span><span class="bc-exp">‚óè‚óè 6882</span><span class="bc-exp">03/27</span><span class="bc-gpay">G Pay</span></div>
          <div class="bc-vis"><svg width="32" height="10" viewBox="0 0 44 14"><text x="0" y="11" font-size="12" font-family="sans-serif" fill="rgba(255,255,255,.6)" font-weight="900" font-style="italic">VISA</text></svg><div style="font-size:8px;color:rgba(255,255,255,.4);margin-top:2px">Debet</div></div>
          <div class="bc-acts"><button class="bc-btn">Ôºã M…ôdaxil</button><button class="bc-btn">üí≥ √ñd…ô</button><button class="bc-btn">‚áÑ K√∂√ß√ºr</button></div>
        </div>
        <div class="bc-dots"><div class="bcd on"></div><div class="bcd"></div><div class="bcd sm"></div><span class="bcd-lbl">Hamƒ±sƒ± ‚Ä∫</span></div>
      </div>
      <div class="srow"><span class="srow-t">Son …ôm…ôliyyatlar ÀÖ</span><span class="srow-l">Hamƒ±sƒ± ‚Ä∫</span></div>
      <div class="qarow">
        <div class="qait"><div class="qaic">üí∏</div><span class="qalb">√ñd…ôni≈ü et</span></div>
        <div class="qait"><div class="qaic">‚¨õ</div><span class="qalb">QR</span></div>
      </div>
      <div class="offsec">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:4px">
          <div><div style="font-size:11px;color:#666">HiperS…ôn ‚ú®</div><div style="font-size:17px;font-weight:700;margin-top:2px">√úmumi t…ôklifl…ôr<span style="background:#1B75BB;color:#fff;border-radius:999px;width:22px;height:22px;display:inline-flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;margin-left:6px;vertical-align:middle">0</span></div></div>
          <span style="font-size:18px;color:#333">‚Ä∫</span>
        </div>
        <div style="background:#ddeaf5;border-radius:13px;padding:12px;margin-top:9px;font-size:13px;color:#5a7090">ABB Visa il…ô balansƒ±nƒ±zƒ± artƒ±rƒ±n...</div>
      </div>
      <div style="height:16px"></div>
    </div>
  </div>

  <!-- INVESTƒ∞Sƒ∞YA SCREEN -->
  <div class="scr" id="scr-inv">
    <div class="inv-title">ƒ∞nvestisiya</div>
    <div class="inv-status"><div class="inv-dot"></div>BAZAR BAƒûLIDIR <span style="font-size:10px;color:#333;margin-left:2px">‚Ä∫</span></div>
    <div class="inv-body">
      <div class="mtabs"><div class="mtab">AB≈û bazarƒ±</div><div class="mtab off">Yerli bazar</div></div>
      <div class="stk-row">
        <div class="stile"><div class="slgo" style="background:#fff;color:#000">ASML</div><div class="snm">ASML</div><div class="spr">1,469.59 $</div><div class="schg up">+10.66 $ (0.73%)</div><svg style="margin-top:7px;height:26px;width:100%" viewBox="0 0 110 28" preserveAspectRatio="none"><polyline points="0,22 20,17 40,19 60,13 80,15 110,8" fill="none" stroke="#22c55e" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
        <div class="stile"><div class="slgo" style="background:#7f1d1d;color:#fff">GX</div><div class="snm">HERO</div><div class="spr">27.29 $</div><div class="schg up">+0.02 $ (0.07%)</div><svg style="margin-top:7px;height:26px;width:100%" viewBox="0 0 110 28" preserveAspectRatio="none"><polyline points="0,18 25,20 50,16 75,18 110,14" fill="none" stroke="#22c55e" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
        <div class="stile"><div class="slgo" style="background:#064e3b;color:#fff">NP</div><div class="snm">SMR</div><div class="spr">13.44 $</div><div class="schg dn">-1.20 $ (-8.2%)</div><svg style="margin-top:7px;height:26px;width:100%" viewBox="0 0 110 28" preserveAspectRatio="none"><polyline points="0,10 25,13 50,16 75,20 110,26" fill="none" stroke="#ef4444" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
      </div>

      <div class="banner-wrap">
        <div class="banner" onclick="openArena()">
          <div class="bnr-bg" style="background:linear-gradient(145deg,#1565c0 0%,#1976d2 30%,#1e88e5 60%,#2196f3 100%);border-radius:20px;padding:20px 20px 18px 20px;min-height:180px;position:relative;overflow:hidden;">
            <!-- subtle noise/texture overlay -->
            <div style="position:absolute;inset:0;background:radial-gradient(ellipse at 70% 30%,rgba(255,255,255,.12) 0%,transparent 60%);border-radius:20px;"></div>
            <div style="position:relative;z-index:2;">
              <!-- Eyebrow -->
              <div style="display:flex;align-items:center;gap:7px;margin-bottom:14px;">
                <div style="width:18px;height:1px;background:rgba(255,255,255,.5);"></div>
                <span style="font-size:9px;font-weight:700;letter-spacing:1.8px;color:rgba(255,255,255,.7);text-transform:uppercase;font-family:'Roboto',sans-serif;">ABB X√úSUSƒ∞ LAYƒ∞H∆è</span>
              </div>
              <!-- Logo row -->
              <div style="display:flex;align-items:center;gap:12px;margin-bottom:14px;">
                <div style="width:44px;height:44px;background:#fff;border-radius:12px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,.18);flex-shrink:0;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><polyline points="3,17 8,11 13,14 21,6" stroke="#1B75BB" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><polyline points="16,6 21,6 21,11" stroke="#1B75BB" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div style="font-size:28px;font-weight:800;color:#fff;letter-spacing:-.5px;line-height:1;font-family:'Roboto',sans-serif;">Invest<span style="color:#90caf9;">Arena</span></div>
              </div>
              <!-- Description -->
              <div style="font-size:13px;color:rgba(255,255,255,.82);line-height:1.5;margin-bottom:18px;max-width:210px;font-family:'Roboto',sans-serif;">S…ôhm yarƒ±≈üƒ±na qo≈üul, portfel qur, m√ºkafat qazan. 3-c√º round davam edir!</div>
              <!-- Stats + button row -->
              <div style="display:flex;align-items:flex-end;justify-content:space-between;">
                <div style="display:flex;flex-direction:column;gap:4px;">
                  <div style="font-size:15px;font-weight:800;color:#fff;font-family:'Roboto',sans-serif;line-height:1.2;"><span>31215</span> <span style="font-size:12px;font-weight:500;color:rgba(255,255,255,.7);">i≈ütirak√ßƒ±</span></div>
                  <div style="font-size:15px;font-weight:800;color:#fff;font-family:'Roboto',sans-serif;line-height:1.2;"><span>$21.000</span> <span style="font-size:12px;font-weight:500;color:rgba(255,255,255,.7);">m√ºkafat fondu</span></div>
                </div>
                <button class="join-btn" onclick="event.stopPropagation();openArena()" style="background:#fff;color:#0d47a1;border:none;border-radius:999px;padding:12px 22px;font-size:14px;font-weight:800;font-family:'Roboto',sans-serif;cursor:pointer;display:flex;align-items:center;gap:6px;box-shadow:0 4px 16px rgba(0,0,0,.22);white-space:nowrap;letter-spacing:.1px;flex-shrink:0;">ƒ∞ndi Qo≈üul ‚Üí</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="ish"><span class="isht">ƒ∞stiqrazlar</span><span class="ishl">Hamƒ±sƒ±na bax</span></div>
      <div class="bscr">
        <div class="btile"><div class="blgo">J&amp;J</div><div class="bnm">Johnson &amp; Johnson</div><div class="byl">6% ‚Äì 7%</div></div>
        <div class="btile"><div class="blgo" style="font-size:18px">‚ìÇÔ∏è</div><div class="bnm">Microsoft Corp.</div><div class="byl">4% ‚Äì 6%</div></div>
        <div class="btile"><div class="blgo" style="font-size:20px">üá∫üá∏</div><div class="bnm">US Treasury</div><div class="byl">1% ‚Äì 7%</div></div>
      </div>
      <div class="ish"><span class="isht">‚òÖ ABB-d…ô "∆èN"l…ôr</span><span class="ishl">Hamƒ±sƒ±na bax</span></div>
      <div class="ptabs"><div class="ptab">Kripto ETF-l…ôr</div><div class="ptab off">ƒ∞zl…ônil…ôn</div><div class="ptab off">Alƒ±nan</div><div class="ptab off">Satƒ±lan</div></div>
      <div class="etfr"><div class="elgo" style="background:#7c3aed;color:#fff">IB</div><div class="einf"><div class="etkr">IBIT <span class="ech">‚Ä¢ 0.92%</span></div><div class="enm">iShares Bitc...</div></div><button class="buybtn">‚Üó ƒ∞ndi al</button></div>
      <div class="etfr"><div class="elgo" style="background:#4b5563;color:#fff">GB</div><div class="einf"><div class="etkr">GBTC <span class="ech">‚Ä¢ 1.14%</span></div><div class="enm">Grayscale Bi...</div></div><button class="buybtn">‚Üó ƒ∞ndi al</button></div>
      <div style="height:20px"></div>
    </div>
  </div>

  <!-- BOTTOM NAV ‚Äî using onclick directly on buttons, most reliable -->
  <div class="bnav">
    <button class="nbtn on" id="nb-home" onclick="goTab('home')">
      <div class="nic"><svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 01-1 1H4a1 1 0 01-1-1V9.5z" stroke="#1B75BB" stroke-width="1.7" fill="none"/><path d="M9 21V12h6v9" stroke="#1B75BB" stroke-width="1.7"/></svg></div>
      <span class="nlb" style="color:#1B75BB">∆èsas</span>
    </button>
    <button class="nbtn inv-pulse" id="nb-inv" onclick="goTab('inv')">
      <div class="nic"><svg width="22" height="22" viewBox="0 0 24 24" fill="none"><polyline points="3,17 8,11 13,14 21,6" stroke="#555" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/><polyline points="16,6 21,6 21,11" stroke="#555" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
      <span class="nlb">ƒ∞nvestisiya</span>
    </button>
    <button class="nplus">
      <svg width="22" height="22" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14" stroke="white" stroke-width="2.2" stroke-linecap="round"/></svg>
    </button>
    <button class="nbtn">
      <div class="nic"><svg width="22" height="22" viewBox="0 0 24 24" fill="none"><circle cx="11" cy="11" r="7" stroke="#555" stroke-width="1.7"/><path d="M16.5 16.5L21 21" stroke="#555" stroke-width="1.7" stroke-linecap="round"/></svg></div>
      <span class="nlb">K…ô≈üf et</span>
    </button>
    <button class="nbtn">
      <div class="nic"><svg width="22" height="22" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="7" height="7" rx="1.5" stroke="#555" stroke-width="1.7"/><rect x="14" y="3" width="7" height="7" rx="1.5" stroke="#555" stroke-width="1.7"/><rect x="3" y="14" width="7" height="7" rx="1.5" stroke="#555" stroke-width="1.7"/><rect x="14" y="14" width="7" height="7" rx="1.5" stroke="#555" stroke-width="1.7"/></svg></div>
      <span class="nlb">Daha √ßox</span>
    </button>
  </div>
</div>

<script>
function goTab(tab) {
  document.getElementById('scr-home').classList.remove('show');
  document.getElementById('scr-inv').classList.remove('show');
  document.getElementById('scr-' + tab).classList.add('show');
  var nh = document.getElementById('nb-home');
  var ni = document.getElementById('nb-inv');
  nh.classList.remove('on'); ni.classList.remove('on');
  nh.querySelector('.nlb').style.color = '#555';
  ni.querySelector('.nlb').style.color = '#555';
  document.getElementById('nb-' + tab).classList.add('on');
  document.getElementById('nb-' + tab).querySelector('.nlb').style.color = '#1B75BB';
}

var _arenaReady = false;
function openArena() {
  document.getElementById('AS').style.display = 'block';
  if (!_arenaReady) { _arenaReady = true; arenaInit(); }
}
function closeArena() {
  document.getElementById('AS').style.display = 'none';
}

(function tick() {
  var n = new Date(), m = n.getMinutes();
  document.getElementById('abbTime').textContent = n.getHours() + ':' + (m<10?'0'+m:m);
  setTimeout(tick, 30000);
})();

/* ===== INVEST ARENA ===== */

const ROUND1_BOARD = [
  {rank:1,  name:'AlphaTrader',  coin:'11,842', prize:'$100'},
  {rank:2,  name:'QuantMaster',  coin:'11,580', prize:'$50'},
  {rank:3,  name:'MarketWizard', coin:'11,320', prize:'$50'},
  {rank:4,  name:'BullRunner',   coin:'11,090', prize:'$50'},
  {rank:5,  name:'TechInvestor', coin:'10,880', prize:'$50'},
  null,
  {rank:57, name:'Siz',          coin:'10,842', prize:'$0', isMe:true},
  {rank:58, name:'NightTrader',  coin:'10,838', prize:'$0'},
];

const ROUND2_BOARD = [
  {rank:1,  name:'AlphaTrader',  coin:'12,140', prize:'$100'},
  {rank:2,  name:'QuantMaster',  coin:'11,970', prize:'$50'},
  {rank:3,  name:'MarketWizard', coin:'11,750', prize:'$50'},
  {rank:4,  name:'BullRunner',   coin:'11,520', prize:'$50'},
  {rank:5,  name:'TechInvestor', coin:'11,340', prize:'$50'},
  null,
  {rank:12, name:'Siz',          coin:'10,717', prize:'$30', isMe:true},
  {rank:13, name:'ValueHunter',  coin:'10,691', prize:'$20'},
  {rank:14, name:'DeltaFund',    coin:'10,648', prize:'$20'},
];

const BTC_RESULTS = {
  1: {
    winner: 'CryptoKing99',
    winnerGuess: '$82,640',
    real: '$82,980',
    diff: '$340',
    myGuess: '$86,140',
    myDiff: '$3,160',
    isWinner: false
  },
  2: {
    winner: 'Siz',
    winnerGuess: '$85,800',
    real: '$86,240',
    diff: '$440',
    myGuess: '$85,800',
    myDiff: '$440',
    isWinner: true
  }
};

let currentRoundView = 3;

function showRoundHistory(roundNum) {
  currentRoundView = roundNum;
  const boards = {1: ROUND1_BOARD, 2: ROUND2_BOARD};
  const titles = {
    1: 'üèÅ 1-ci Round ‚Äî ABB Coin Sƒ±ralamasƒ±',
    2: 'üèÅ 2-ci Round ‚Äî ABB Coin Sƒ±ralamasƒ±',
    3: 'üèÜ 3-c√º Round (Aktiv) ‚Äî ABB Coin Sƒ±ralamasƒ±'
  };

  document.getElementById('roundCardTitle').textContent = titles[roundNum];

  const btcStrip = document.getElementById('btcResultStrip');
  const myStrip = document.getElementById('myResultStrip');
  const btc = BTC_RESULTS[roundNum];

  if (btc) {
    btcStrip.style.display = 'block';
    const winnerLabel = btc.isWinner
      ? '<span style="background:#16a34a;color:#fff;font-size:.5rem;font-weight:800;padding:2px 6px;border-radius:999px;margin-left:4px;">QALƒ∞B - Sƒ∞Z</span>'
      : '';
    document.getElementById('btcResultTitle').innerHTML = '‚Çø BTC Qiym…ôt Yarƒ±≈ümasƒ±' + (btc.isWinner ? '<span style="color:#c89a00;margin-left:6px;">üèÜ Qalib: Siz!</span>' : '');
    document.getElementById('btcResultBody').innerHTML =
      `H…ôqiqi qiym…ôt: <strong>${btc.real}</strong> &nbsp;|&nbsp; ` +
      `Qalib: <strong>${btc.winner}</strong> (${btc.winnerGuess}, f…ôrq: ${btc.diff})` +
      (btc.isWinner ? '' : `<br>M…ônim t…ôxminim: ${btc.myGuess} ‚Äî f…ôrq: ${btc.myDiff}`);
    myStrip.style.display = 'none';
  } else {
    btcStrip.style.display = 'none';
    myStrip.style.display = 'none';
  }

  if (roundNum === 3) {
    // Active round
    btcStrip.style.display = 'block';
    btcStrip.style.background = '#f0f6ff';
    btcStrip.style.borderColor = '#a8c4e8';
    document.getElementById('btcResultTitle').innerHTML = '‚ö° ‚Çø BTC Qiym…ôt Yarƒ±≈ümasƒ± ‚Äî N…ôtic…ô g√∂zl…ônilir';
    document.getElementById('btcResultTitle').style.color = '#1B75BB';
    btcStrip.querySelector('[style*="color:#2a5a30"]') && (btcStrip.querySelector('[id="btcResultBody"]').style.color = '#1a3a6a');
    const myGuess = window._btcGuess;
    document.getElementById('btcResultBody').innerHTML = myGuess
      ? `Sizin t…ôxmininiz: <strong>$${Number(myGuess).toLocaleString()}</strong> &nbsp;|&nbsp; <span style="color:#5a7090;">N…ôtic…ô 31.03.2026-da a√ßƒ±qlanacaq</span>`
      : `<span style="color:#e07030;">‚ö† Siz h…ôl…ô t…ôxmin etm…ômisiniz</span> ‚Äî <button onclick="openModal('btcModal')" style="background:none;border:none;color:#1B75BB;cursor:pointer;font-weight:700;font-size:.76rem;text-decoration:underline;padding:0;">T…ôxmin et</button>`;
    myStrip.style.display = 'none';
    arenaRenderLeaderboard('roundLeaderboard', ROUND_BOARD);
  } else {
    arenaRenderLeaderboard('roundLeaderboard', boards[roundNum]);
  }

  // Highlight active dot
  document.getElementById('AS').querySelectorAll('.round-dot').forEach((d,i) => {
    d.classList.toggle('current', i + 1 === roundNum);
  });
}

function arenaInit() {
  arenaRenderStocks();
  arenaRenderLeaderboard('roundLeaderboard', ROUND_BOARD);
  arenaRenderLeaderboard('finalLeaderboard', FINAL_BOARD, 'Final balans');
  // Set initial balance displays
  const finalScore = calcFinalBalance();
  const fd = document.getElementById('finalBalanceDisplay');
  if (fd) fd.textContent = finalScore.toLocaleString();
  const rd = document.getElementById('roundBalanceDisplay');
  if (rd) rd.textContent = BALANCE.toLocaleString();
  // Show round 3 by default in round tab
  showRoundHistory(3);
  document.getElementById('AS').querySelectorAll('.modal-overlay').forEach(function(o){
    o.addEventListener('click', function(e){ if(e.target===this) this.classList.remove('show'); });
  });
}

const BALANCE = 10000, MAX_COIN = 5000, MIN_COIN = 1000, MIN_S = 3, MAX_S = 5;

const STOCKS = [
  {ticker:'NVDA', name:'NVIDIA Corp.',          price:190.13, change:-0.16},
  {ticker:'AAPL', name:'Apple Inc.',            price:263.47, change:-0.42},
  {ticker:'MSFT', name:'Microsoft Corp.',       price:396.09, change:-0.29},
  {ticker:'AMZN', name:'Amazon.com Inc.',       price:208.61, change:-0.71},
  {ticker:'GOOGL',name:'Alphabet Inc.',         price:316.18, change:+0.38},
  {ticker:'META', name:'Meta Platforms',        price:651.41, change:-0.65},
  {ticker:'AVGO', name:'Broadcom Inc.',         price:329.48, change:-0.95},
  {ticker:'TSLA', name:'Tesla Inc.',            price:408.46, change:-0.82},
  {ticker:'BRK.B',name:'Berkshire Hathaway',    price:497.55, change:-0.13},
  {ticker:'LLY',  name:'Eli Lilly & Co.',       price:1046.20,change:+3.63},
  {ticker:'WMT',  name:'Walmart Inc.',          price:122.64, change:-0.28},
  {ticker:'JPM',  name:'JPMorgan Chase',        price:308.81, change:-0.64},
  {ticker:'XOM',  name:'ExxonMobil Corp.',      price:147.25, change:-0.02},
  {ticker:'V',    name:'Visa Inc.',             price:318.89, change:-0.64},
  {ticker:'JNJ',  name:'Johnson & Johnson',     price:242.90, change:+0.17},
  {ticker:'MA',   name:'Mastercard Inc.',       price:521.00, change:-1.03},
  {ticker:'COST', name:'Costco Wholesale',      price:983.13, change:-0.22},
  {ticker:'ORCL', name:'Oracle Corp.',          price:146.36, change:-1.16},
  {ticker:'ABBV', name:'AbbVie Inc.',           price:224.90, change:+0.04},
  {ticker:'BAC',  name:'Bank of America',       price:52.78,  change:-0.52},
  {ticker:'HD',   name:'Home Depot Inc.',       price:381.49, change:-0.20},
  {ticker:'PG',   name:'Procter & Gamble',      price:160.58, change:-0.12},
  {ticker:'CVX',  name:'Chevron Corp.',         price:183.49, change:-0.24},
  {ticker:'GE',   name:'GE Aerospace',          price:342.59, change:-0.18},
  {ticker:'CAT',  name:'Caterpillar Inc.',      price:759.00, change:-0.10},
  {ticker:'KO',   name:'Coca-Cola Co.',         price:79.75,  change:-0.11},
  {ticker:'NFLX', name:'Netflix Inc.',          price:965.20, change:-0.46},
  {ticker:'AMD',  name:'Advanced Micro Devices',price:197.65, change:-1.25},
  {ticker:'PLTR', name:'Palantir Technologies', price:133.72, change:-1.13},
  {ticker:'CSCO', name:'Cisco Systems',         price:78.75,  change:-0.56},
  {ticker:'MRK',  name:'Merck & Co.',           price:123.16, change:+0.73},
  {ticker:'LRCX', name:'Lam Research Corp.',    price:243.86, change:-0.43},
  {ticker:'AMAT', name:'Applied Materials',     price:372.45, change:-0.78},
  {ticker:'PM',   name:'Philip Morris Intl.',   price:183.12, change:-0.15},
  {ticker:'MS',   name:'Morgan Stanley',        price:174.50, change:-0.52},
  {ticker:'GS',   name:'Goldman Sachs',         price:919.50, change:-0.30},
  {ticker:'UNH',  name:'UnitedHealth Group',    price:497.20, change:-0.80},
  {ticker:'NEE',  name:'NextEra Energy',        price:68.41,  change:+0.45},
  {ticker:'CRM',  name:'Salesforce Inc.',       price:326.85, change:+1.88},
  {ticker:'ADBE', name:'Adobe Inc.',            price:448.67, change:-1.12},
  {ticker:'PEP',  name:'PepsiCo Inc.',          price:148.35, change:-0.20},
  {ticker:'DIS',  name:'Walt Disney Co.',       price:112.40, change:-0.55},
  {ticker:'QCOM', name:'Qualcomm Inc.',         price:158.72, change:-1.15},
  {ticker:'INTU', name:'Intuit Inc.',           price:591.30, change:-0.40},
  {ticker:'AMGN', name:'Amgen Inc.',            price:272.15, change:+0.30},
  {ticker:'NOW',  name:'ServiceNow Inc.',       price:989.45, change:-0.62},
  {ticker:'UBER', name:'Uber Technologies',     price:76.84,  change:+1.20},
  {ticker:'INTC', name:'Intel Corp.',           price:24.58,  change:-0.98},
  {ticker:'TXN',  name:'Texas Instruments',     price:198.40, change:-0.35},
  {ticker:'SPGI', name:'S&P Global Inc.',       price:486.20, change:+0.28},
];

const ROUND_BOARD = [
  {rank:1, name:'AlphaTrader',  coin:'15,840',prize:'$100'},
  {rank:2, name:'MarketWizard', coin:'14,920',prize:'$50'},
  {rank:3, name:'CryptoKing99', coin:'14,210',prize:'$50'},
  {rank:4, name:'BullRunner',   coin:'13,880',prize:'$50'},
  {rank:5, name:'TechInvestor', coin:'13,450',prize:'$50'},
  {rank:6, name:'QuantMaster',  coin:'12,990',prize:'$30'},
  {rank:7, name:'Siz',          coin:'11,559',prize:'$30',isMe:true},
  {rank:8, name:'DeltaFund',    coin:'11,320',prize:'$30'},
  {rank:9, name:'MomentumAce',  coin:'11,080',prize:'$30'},
  {rank:10,name:'ValueHunter',  coin:'10,870',prize:'$30'},
  {rank:11,name:'NightTrader',  coin:'10,640',prize:'$20'},
  {rank:12,name:'EagleEye',     coin:'10,390',prize:'$20'},
];

const FINAL_BOARD = [
  {rank:1,  name:'AlphaTrader',  coin:'8,500', prize:'$1,000'},
  {rank:2,  name:'QuantMaster',  coin:'8,200', prize:'$600'},
  {rank:3,  name:'MarketWizard', coin:'7,950', prize:'$400'},
  {rank:4,  name:'BullRunner',   coin:'7,680', prize:'$300'},
  {rank:5,  name:'CryptoKing99', coin:'7,430', prize:'$300'},
  {rank:6,  name:'TechInvestor', coin:'7,170', prize:'$300'},
  {rank:7,  name:'DeltaFund',    coin:'6,890', prize:'$300'},
  {rank:8,  name:'MomentumAce',  coin:'6,620', prize:'$300'},
  null,
  {rank:14, name:'Siz',          coin:'4,677', prize:'$200', isMe:true},
  {rank:15, name:'ValueHunter',  coin:'4,450', prize:'$200'},
  {rank:16, name:'NightTrader',  coin:'4,210', prize:'$200'},
  {rank:17, name:'EagleEye',     coin:'3,980', prize:'$200'},
];

let selected = [], confirmed = false;
// Track how much has been allocated to each ticker (to know "firstAlloc" state)
const allocValues = {}; // ticker -> current numeric value

/* ======= TOAST ======= */
function toast(msg, type='error') {
  const c = document.getElementById('TC');
  const el = document.createElement('div');
  el.className = 'toast' + (type==='warn' ? ' warn' : '');
  el.innerHTML = `<span style="flex-shrink:0">${type==='warn'?'‚ö†Ô∏è':'üö´'}</span><span>${msg}</span>`;
  c.appendChild(el);
  setTimeout(() => { el.classList.add('out'); setTimeout(() => el.remove(), 260); }, 3400);
}

/* ======= STOCKS ======= */
// Logo: try multiple CDNs with fallback to colored initials
const LOGOS = {
  NVDA: 'https://assets.parqet.com/logos/symbol/NVDA',
  AAPL: 'https://assets.parqet.com/logos/symbol/AAPL',
  MSFT: 'https://assets.parqet.com/logos/symbol/MSFT',
  AMZN: 'https://assets.parqet.com/logos/symbol/AMZN',
  GOOGL:'https://assets.parqet.com/logos/symbol/GOOGL',
  META: 'https://assets.parqet.com/logos/symbol/META',
  AVGO: 'https://assets.parqet.com/logos/symbol/AVGO',
  TSLA: 'https://assets.parqet.com/logos/symbol/TSLA',
  'BRK.B':'https://assets.parqet.com/logos/symbol/BRK.B',
  LLY:  'https://assets.parqet.com/logos/symbol/LLY',
  WMT:  'https://assets.parqet.com/logos/symbol/WMT',
  JPM:  'https://assets.parqet.com/logos/symbol/JPM',
  XOM:  'https://assets.parqet.com/logos/symbol/XOM',
  V:    'https://assets.parqet.com/logos/symbol/V',
  JNJ:  'https://assets.parqet.com/logos/symbol/JNJ',
  MA:   'https://assets.parqet.com/logos/symbol/MA',
  COST: 'https://assets.parqet.com/logos/symbol/COST',
  ORCL: 'https://assets.parqet.com/logos/symbol/ORCL',
  ABBV: 'https://assets.parqet.com/logos/symbol/ABBV',
  BAC:  'https://assets.parqet.com/logos/symbol/BAC',
  HD:   'https://assets.parqet.com/logos/symbol/HD',
  PG:   'https://assets.parqet.com/logos/symbol/PG',
  CVX:  'https://assets.parqet.com/logos/symbol/CVX',
  GE:   'https://assets.parqet.com/logos/symbol/GE',
  CAT:  'https://assets.parqet.com/logos/symbol/CAT',
  KO:   'https://assets.parqet.com/logos/symbol/KO',
  NFLX: 'https://assets.parqet.com/logos/symbol/NFLX',
  AMD:  'https://assets.parqet.com/logos/symbol/AMD',
  PLTR: 'https://assets.parqet.com/logos/symbol/PLTR',
  CSCO: 'https://assets.parqet.com/logos/symbol/CSCO',
  MRK:  'https://assets.parqet.com/logos/symbol/MRK',
  LRCX: 'https://assets.parqet.com/logos/symbol/LRCX',
  AMAT: 'https://assets.parqet.com/logos/symbol/AMAT',
  PM:   'https://assets.parqet.com/logos/symbol/PM',
  MS:   'https://assets.parqet.com/logos/symbol/MS',
  GS:   'https://assets.parqet.com/logos/symbol/GS',
  UNH:  'https://assets.parqet.com/logos/symbol/UNH',
  NEE:  'https://assets.parqet.com/logos/symbol/NEE',
  CRM:  'https://assets.parqet.com/logos/symbol/CRM',
  ADBE: 'https://assets.parqet.com/logos/symbol/ADBE',
  PEP:  'https://assets.parqet.com/logos/symbol/PEP',
  DIS:  'https://assets.parqet.com/logos/symbol/DIS',
  QCOM: 'https://assets.parqet.com/logos/symbol/QCOM',
  INTU: 'https://assets.parqet.com/logos/symbol/INTU',
  AMGN: 'https://assets.parqet.com/logos/symbol/AMGN',
  NOW:  'https://assets.parqet.com/logos/symbol/NOW',
  UBER: 'https://assets.parqet.com/logos/symbol/UBER',
  INTC: 'https://assets.parqet.com/logos/symbol/INTC',
  TXN:  'https://assets.parqet.com/logos/symbol/TXN',
  SPGI: 'https://assets.parqet.com/logos/symbol/SPGI',
};

// Clearbit fallback URLs
const LOGOS_FB = {
  NVDA: 'https://logo.clearbit.com/nvidia.com',
  AAPL: 'https://logo.clearbit.com/apple.com',
  MSFT: 'https://logo.clearbit.com/microsoft.com',
  AMZN: 'https://logo.clearbit.com/amazon.com',
  GOOGL:'https://logo.clearbit.com/google.com',
  META: 'https://logo.clearbit.com/meta.com',
  AVGO: 'https://logo.clearbit.com/broadcom.com',
  TSLA: 'https://logo.clearbit.com/tesla.com',
  'BRK.B':'https://logo.clearbit.com/berkshirehathaway.com',
  LLY:  'https://logo.clearbit.com/lilly.com',
  WMT:  'https://logo.clearbit.com/walmart.com',
  JPM:  'https://logo.clearbit.com/jpmorganchase.com',
  XOM:  'https://logo.clearbit.com/exxonmobil.com',
  V:    'https://logo.clearbit.com/visa.com',
  JNJ:  'https://logo.clearbit.com/jnj.com',
  MA:   'https://logo.clearbit.com/mastercard.com',
  COST: 'https://logo.clearbit.com/costco.com',
  ORCL: 'https://logo.clearbit.com/oracle.com',
  ABBV: 'https://logo.clearbit.com/abbvie.com',
  BAC:  'https://logo.clearbit.com/bankofamerica.com',
  HD:   'https://logo.clearbit.com/homedepot.com',
  PG:   'https://logo.clearbit.com/pg.com',
  CVX:  'https://logo.clearbit.com/chevron.com',
  GE:   'https://logo.clearbit.com/ge.com',
  CAT:  'https://logo.clearbit.com/caterpillar.com',
  KO:   'https://logo.clearbit.com/coca-cola.com',
  NFLX: 'https://logo.clearbit.com/netflix.com',
  AMD:  'https://logo.clearbit.com/amd.com',
  PLTR: 'https://logo.clearbit.com/palantir.com',
  CSCO: 'https://logo.clearbit.com/cisco.com',
  MRK:  'https://logo.clearbit.com/merck.com',
  LRCX: 'https://logo.clearbit.com/lamresearch.com',
  AMAT: 'https://logo.clearbit.com/appliedmaterials.com',
  PM:   'https://logo.clearbit.com/pmi.com',
  MS:   'https://logo.clearbit.com/morganstanley.com',
  GS:   'https://logo.clearbit.com/goldmansachs.com',
  UNH:  'https://logo.clearbit.com/unitedhealthgroup.com',
  NEE:  'https://logo.clearbit.com/nexteraenergy.com',
  CRM:  'https://logo.clearbit.com/salesforce.com',
  ADBE: 'https://logo.clearbit.com/adobe.com',
  PEP:  'https://logo.clearbit.com/pepsico.com',
  DIS:  'https://logo.clearbit.com/disney.com',
  QCOM: 'https://logo.clearbit.com/qualcomm.com',
  INTU: 'https://logo.clearbit.com/intuit.com',
  AMGN: 'https://logo.clearbit.com/amgen.com',
  NOW:  'https://logo.clearbit.com/servicenow.com',
  UBER: 'https://logo.clearbit.com/uber.com',
  INTC: 'https://logo.clearbit.com/intel.com',
  TXN:  'https://logo.clearbit.com/ti.com',
  SPGI: 'https://logo.clearbit.com/spglobal.com',
};

// ‚îÄ‚îÄ MINI CHART DATA: 12-month % change points (Feb 2024 ‚Üí Feb 2025, 24 data points)
// Based on real approximate price trajectories for each stock
const CHART_DATA = {
  NVDA: [100,115,132,118,145,178,210,195,230,260,285,310,340,295,320,365,400,430,390,420,450,480,460,190],
  AAPL: [100,98,105,108,103,110,118,122,115,120,125,130,128,132,138,145,148,152,158,162,168,172,178,263],
  MSFT: [100,102,108,115,110,118,122,128,132,125,130,138,142,148,152,158,162,168,172,178,382,390,398,396],
  AMZN: [100,105,110,108,115,120,125,130,118,125,132,138,142,148,155,162,168,172,178,185,192,198,204,208],
  GOOGL:[100,98,105,110,108,115,120,125,132,128,135,140,145,150,155,162,168,175,182,192,200,210,218,316],
  META: [100,108,115,125,132,145,155,148,162,175,185,195,205,215,225,235,245,255,265,275,285,295,305,651],
  AVGO: [100,110,118,125,132,140,148,155,162,155,162,170,178,185,192,200,210,220,228,235,242,250,258,329],
  TSLA: [100,92,85,95,102,95,88,98,105,95,102,110,118,125,112,120,130,140,150,145,155,165,175,408],
  'BRK.B':[100,102,105,108,110,112,115,118,120,122,125,128,130,132,135,138,140,142,145,148,150,152,155,497],
  LLY:  [100,110,120,115,125,135,145,140,150,160,170,180,175,185,195,205,215,225,235,245,255,265,275,1046],
  WMT:  [100,102,105,108,110,112,115,118,120,122,125,128,130,132,135,138,140,142,145,148,150,152,155,122],
  JPM:  [100,105,110,108,115,120,125,130,128,135,140,145,150,155,160,165,170,175,180,185,190,195,200,308],
  XOM:  [100,102,105,108,105,102,105,108,110,108,105,108,112,115,112,115,118,120,118,120,122,125,128,147],
  V:    [100,102,105,108,110,112,115,118,120,122,125,128,130,132,135,138,140,142,145,148,150,152,155,318],
  JNJ:  [100,98,96,98,100,98,100,102,100,102,104,102,104,106,104,106,108,106,108,110,108,110,112,242],
  MA:   [100,102,105,108,110,112,115,118,120,122,125,128,130,132,135,138,140,142,145,148,150,152,155,521],
  COST: [100,105,110,115,120,125,130,135,140,145,150,155,160,165,170,175,180,185,190,195,200,205,210,983],
  ORCL: [100,105,110,108,115,120,118,125,130,128,132,138,142,148,152,158,162,168,172,145,142,145,148,146],
  ABBV: [100,102,105,108,110,112,115,118,120,122,125,128,130,132,135,138,140,142,145,148,150,152,155,224],
  BAC:  [100,102,105,108,110,112,115,118,120,122,125,128,130,132,135,138,140,142,145,148,150,152,155,52],
  HD:   [100,102,105,108,110,112,115,118,120,122,125,128,130,132,135,138,140,142,145,148,150,152,155,381],
  PG:   [100,101,102,103,104,103,104,105,106,105,106,107,108,107,108,109,110,109,110,111,112,111,112,160],
  CVX:  [100,102,104,102,104,102,104,106,104,106,108,106,108,110,108,110,112,110,112,114,112,114,116,183],
  GE:   [100,108,115,122,130,138,145,152,160,168,175,182,190,198,205,212,220,228,235,242,250,258,265,342],
  CAT:  [100,105,110,115,120,125,130,135,140,145,150,155,160,165,170,175,180,185,190,195,200,205,210,759],
  KO:   [100,101,102,101,102,101,102,103,102,103,104,103,104,105,104,105,106,105,106,107,106,107,108,79],
  NFLX: [100,110,120,115,125,135,145,140,150,160,170,180,175,185,195,205,215,225,235,245,255,265,275,965],
  AMD:  [100,110,120,115,125,118,125,132,128,125,130,138,142,148,152,145,148,152,155,145,142,145,148,197],
  PLTR: [100,105,110,108,115,120,118,125,130,128,132,138,142,148,155,162,170,178,188,200,215,230,245,133],
  CSCO: [100,102,104,102,104,102,104,106,104,106,108,106,108,110,108,110,112,110,112,114,112,114,116,78],
  MRK:  [100,102,105,108,110,108,105,102,105,108,110,108,105,108,110,108,110,112,110,112,114,112,114,123],
  LRCX: [100,110,120,115,125,135,128,132,138,132,128,132,138,142,138,135,138,142,145,148,150,148,145,243],
  AMAT: [100,108,115,122,118,125,132,128,132,138,135,138,142,148,145,142,145,148,152,155,158,160,162,372],
  PM:   [100,102,105,108,110,112,115,118,120,122,125,128,130,132,135,138,140,142,145,148,150,152,155,183],
  MS:   [100,105,110,108,115,120,125,130,128,135,140,145,150,155,160,165,170,175,180,185,190,195,200,174],
  GS:   [100,105,110,115,120,125,130,135,140,145,150,155,160,165,170,175,180,185,190,195,200,205,210,919],
  UNH:  [100,105,110,115,120,118,115,118,122,120,118,120,122,125,122,120,118,120,122,118,115,112,110,497],
  NEE:  [100,98,95,98,100,98,95,98,100,98,96,98,100,102,100,98,100,102,100,102,104,102,100,68],
  CRM:  [100,105,110,108,112,118,122,118,122,128,132,128,132,138,142,138,142,148,152,158,162,168,172,326],
  ADBE: [100,105,110,115,112,108,112,115,112,108,112,115,112,108,110,108,110,112,110,108,110,112,110,448],
  PEP:  [100,101,102,101,102,101,100,101,102,101,100,101,102,101,100,101,102,101,100,101,100,99,100,148],
  DIS:  [100,102,105,108,110,112,115,112,110,112,115,118,115,112,115,118,115,118,120,118,115,118,120,112],
  QCOM: [100,105,110,108,112,118,115,118,122,118,122,128,125,122,125,128,132,128,125,122,125,128,130,158],
  INTU: [100,105,110,115,112,108,110,115,118,115,118,122,125,128,132,135,138,135,132,135,138,142,145,591],
  AMGN: [100,102,105,108,110,112,115,112,110,112,115,118,115,112,115,118,115,112,115,118,120,118,120,272],
  NOW:  [100,108,115,122,130,138,145,152,160,168,175,182,190,198,205,212,220,228,235,242,250,258,265,989],
  UBER: [100,105,110,115,120,118,122,128,132,128,132,138,142,148,152,148,145,148,152,148,145,148,152,76],
  INTC: [100,105,110,108,105,102,100,98,95,92,90,88,85,82,80,78,75,72,70,68,65,62,60,24],
  TXN:  [100,102,105,108,110,112,115,118,120,118,120,122,125,128,130,128,130,132,135,138,140,142,145,198],
  SPGI: [100,105,110,115,120,125,130,135,140,145,150,155,160,165,170,175,180,185,190,195,200,205,210,486],
};

function getChartSVG(ticker, isUp) {
  const data = CHART_DATA[ticker];
  if (!data) return '';
  const w = 72, h = 28;
  const min = Math.min(...data), max = Math.max(...data);
  const range = max - min || 1;
  const pts = data.map((v, i) => {
    const x = (i / (data.length - 1)) * w;
    const y = h - ((v - min) / range) * (h - 2) - 1;
    return `${x.toFixed(1)},${y.toFixed(1)}`;
  }).join(' ');
  const color = isUp ? '#22c55e' : '#ef4444';
  const gradId = 'g_' + ticker.replace('.','_');
  // area fill
  const firstPt = data.map((v, i) => {
    const x = (i / (data.length - 1)) * w;
    const y = h - ((v - min) / range) * (h - 2) - 1;
    return `${x.toFixed(1)},${y.toFixed(1)}`;
  });
  const areaPath = `M${firstPt[0]} L${firstPt.slice(1).join(' L')} L${w},${h} L0,${h} Z`;
  return `<svg width="${w}" height="${h}" viewBox="0 0 ${w} ${h}" style="flex-shrink:0;">
    <defs>
      <linearGradient id="${gradId}" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="${color}" stop-opacity="0.18"/>
        <stop offset="100%" stop-color="${color}" stop-opacity="0.01"/>
      </linearGradient>
    </defs>
    <path d="${areaPath}" fill="url(#${gradId})"/>
    <polyline points="${pts}" fill="none" stroke="${color}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`;
}
const SECTORS = {
  NVDA:'Yarƒ±mke√ßirici', AAPL:'Texnologiya',  MSFT:'Texnologiya',
  AMZN:'E-ticar…ôt',    GOOGL:'ƒ∞nternet',     META:'Sosial Media',
  AVGO:'Yarƒ±mke√ßirici',TSLA:'Avtomobil',     'BRK.B':'Maliyy…ô',
  LLY:'S…ôhiyy…ô',       WMT:'P…ôrak…ônd…ô',      JPM:'Bank',
  XOM:'Enerji',        V:'√ñd…ôni≈ü',            JNJ:'S…ôhiyy…ô',
  MA:'√ñd…ôni≈ü',         COST:'P…ôrak…ônd…ô',      ORCL:'Texnologiya',
  ABBV:'∆ècza√ßƒ±lƒ±q',    BAC:'Bank',            HD:'Ev',
  PG:'ƒ∞stehlak',       CVX:'Enerji',          GE:'S…ônaye',
  CAT:'S…ônaye',        KO:'ƒ∞√ßki',             NFLX:'∆èyl…ônc…ô',
  AMD:'Yarƒ±mke√ßirici', PLTR:'S√ºni intellekt', CSCO:'Texnologiya',
  MRK:'∆ècza√ßƒ±lƒ±q',    LRCX:'Yarƒ±mke√ßirici',  AMAT:'Yarƒ±mke√ßirici',
  PM:'ƒ∞stehlak',       MS:'Maliyy…ô',           GS:'Maliyy…ô',
  UNH:'Sƒ±ƒüorta',       NEE:'Enerji',           CRM:'Texnologiya',
  ADBE:'Texnologiya',  PEP:'ƒ∞√ßki',             DIS:'∆èyl…ônc…ô',
  QCOM:'Yarƒ±mke√ßirici',INTU:'Texnologiya',    AMGN:'∆ècza√ßƒ±lƒ±q',
  NOW:'Texnologiya',   UBER:'N…ôqliyyat',       INTC:'Yarƒ±mke√ßirici',
  TXN:'Yarƒ±mke√ßirici', SPGI:'Maliyy…ô',
};

function updateSelCounter() {
  const n = selected.length;
  const label = document.getElementById('selCountLabel');
  const dots = document.getElementById('selDots');
  if(label) label.textContent = n + ' / 5 se√ßildi¬†¬∑¬†minimum 3';
  if(dots) {
    const dotEls = dots.querySelectorAll('.sel-dot');
    dotEls.forEach((d,i) => {
      d.classList.remove('filled','min-ok');
      if(i < n) d.classList.add(n >= 3 ? 'min-ok' : 'filled');
    });
  }
}

function mkLogoEl(ticker) {
  const fbUrl = LOGOS_FB[ticker] || '';
  const primUrl = LOGOS[ticker] || '';
  const abbr = ticker.replace('.','').slice(0,3);
  if (!primUrl) return '<span style="font-size:.6rem;font-weight:800;color:#1B75BB;">' + abbr + '</span>';
  return '<img src="' + primUrl + '" alt="' + ticker + '" data-fb="0" data-abbr="' + abbr + '" data-fburl="' + fbUrl + '" style="width:28px;height:28px;object-fit:contain;border-radius:4px;" onerror="logoFallback(this)">';
}

function logoFallback(img) {
  const fb = img.getAttribute('data-fb');
  const fbUrl = img.getAttribute('data-fburl');
  const abbr = img.getAttribute('data-abbr');
  if (fb === '0' && fbUrl) {
    img.setAttribute('data-fb', '1');
    img.src = fbUrl;
  } else {
    img.outerHTML = '<span style="font-size:.6rem;font-weight:800;color:#1B75BB;">' + abbr + '</span>';
  }
}

function arenaRenderStocks(f = '') {
  const g = document.getElementById('stocksGrid');
  const lf = f.toLowerCase();
  const filt = STOCKS.filter(s => s.ticker.toLowerCase().includes(lf) || s.name.toLowerCase().includes(lf));
  const atMax = selected.length >= MAX_S;
  g.innerHTML = filt.map(s => {
    const sel = selected.includes(s.ticker);
    const dim = atMax && !sel;
    const sign = s.change >= 0 ? '+' : '';
    const cls = s.change >= 0 ? 'pos' : 'neg';
    const isUp = s.change >= 0;
    const sector = SECTORS[s.ticker] || 'S…ôhm';
    const _logoEl = mkLogoEl(s.ticker);
    const _chart = getChartSVG(s.ticker, isUp);
    return `<div class="stock-card${sel?' selected':''}${dim?' maxed':''}" onclick="toggleStock('${s.ticker}')">
      <div class="sc-logo">${_logoEl}</div>
      <div class="sc-body">
        <div class="sc-ticker-row">
          <span class="stock-ticker">${s.ticker}</span>
          <span class="sc-sector">${sector}</span>
        </div>
        <div class="stock-name">${s.name}</div>
      </div>
      <div class="sc-chart" style="flex-shrink:0;display:flex;align-items:center;padding:0 4px;">${_chart}</div>
      <div class="sc-price-col">
        <div class="stock-price">$${s.price.toFixed(2)}</div>
        <div class="stock-change ${cls}">${sign}${s.change.toFixed(2)}%</div>
      </div>
      <div class="sc-check">
        <svg width="11" height="11" viewBox="0 0 12 12" fill="none"><path d="M2 6l3 3 5-5" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </div>
    </div>`;
  }).join('');
  updateSelCounter();
}
function arenaFilterStocks() { arenaRenderStocks(document.getElementById('searchInput').value); }

function toggleStock(ticker) {
  if (confirmed) return;
  if (selected.includes(ticker)) {
    selected = selected.filter(t => t !== ticker);
    delete allocValues[ticker];
  } else {
    if (selected.length >= MAX_S) { toast(`Maksimum ${MAX_S} s…ôhm se√ßm…ôk m√ºmk√ºnd√ºr! Ba≈üqa birini sil…ôr…ôk d…ôyi≈üdirin.`); return; }
    selected.push(ticker);
    allocValues[ticker] = 0;
  }
  arenaRenderStocks(document.getElementById('searchInput').value);
  updateBasket();
}

/* ======= BASKET ======= */

function removeStock(ticker) {
  selected = selected.filter(t => t !== ticker);
  delete allocValues[ticker];
  updateBasket();
  arenaRenderStocks(document.getElementById('searchInput') ? document.getElementById('searchInput').value : '');
}

function updateBasket() {
  const w = document.getElementById('basketWrap');
  if (selected.length === 0) { w.style.display = 'none'; return; }
  w.style.display = 'block';
  renderItems();
  recalc();
}

function getRemaining() {
  return BALANCE - getAlloc();
}

// % buttons logic:
// - 25%/50%: always available (capped at 50% of remaining at time of first alloc)
// - 75%/100%: only if total alloc for THIS ticker already > 0 AND total alloc <= 50% of BALANCE
// The % is of remaining balance at the moment you click
function renderItems() {
  const container = document.getElementById('portfolioItems');
  container.innerHTML = selected.map(ticker => {
    const s = STOCKS.find(x => x.ticker === ticker);
    const val = allocValues[ticker] || 0;
    const pct = val > 0 ? ((val/BALANCE)*100).toFixed(0)+'%' : '‚Äî';
    return `<div class="portfolio-item" id="pi-row-${ticker}">
      <div class="pi-top">
        <div class="pi-info" style="display:flex;align-items:center;gap:.55rem;">
          <button onclick="removeStock('${ticker}')" style="background:#fff0f0;border:1px solid #fca5a5;border-radius:50%;width:22px;height:22px;cursor:pointer;font-size:.65rem;color:#dc2626;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-weight:800;transition:all .15s;" title="Sil" onmouseover="this.style.background='#fee2e2'" onmouseout="this.style.background='#fff0f0'">‚úï</button>
          <div style="min-width:0;">
            <div class="pi-ticker">${s.ticker}</div>
            <div class="pi-name">${s.name}</div>
          </div>
        </div>
        <div class="pi-right">
          <input class="pi-input" type="number" id="inp-${ticker}" placeholder="1,000‚Äì5,000"
            min="${MIN_COIN}" max="${MAX_COIN}" value="${val||''}" oninput="onInp('${ticker}',this)">
          <div class="pi-hint">%10‚Äì50 ¬∑ Se√ßildi: ${pct}</div>
          <div class="pct-btns" id="pctbtns-${ticker}"></div>
          <span class="pi-warn" id="pw-${ticker}">Max 50%!</span>
        </div>
      </div>
    </div>`;
  }).join('');
  selected.forEach(t => renderPctBtns(t));
}

function renderPctBtns(ticker) {
  const wrap = document.getElementById('pctbtns-' + ticker);
  if (!wrap) return;

  // Budget available for this ticker: total remaining after other tickers, hard-capped at MAX_COIN (50% of BALANCE)
  const otherAlloc = getAlloc() - (allocValues[ticker] || 0);
  const remAfterOthers = BALANCE - otherAlloc; // how much coin is free
  const maxForThis = Math.min(remAfterOthers, MAX_COIN); // can't put more than 5000 in one ticker

  // Compute raw % values of the free budget (remAfterOthers), then cap each at MAX_COIN
  const raw25  = Math.floor(remAfterOthers * 0.25);
  const raw50  = Math.floor(remAfterOthers * 0.50);
  const raw75  = Math.floor(remAfterOthers * 0.75);
  const raw100 = remAfterOthers;

  const c25  = Math.min(raw25,  MAX_COIN);
  const c50  = Math.min(raw50,  MAX_COIN);
  const c75  = Math.min(raw75,  MAX_COIN);
  const c100 = Math.min(raw100, MAX_COIN);

  // 75% and 100% are UNLOCKED when remaining balance < 50.01% of BALANCE
  // (meaning this is NOT the first big allocation ‚Äî others have already consumed some budget)
  const remainingPct = remAfterOthers / BALANCE; // 0..1
  const unlock75_100 = remainingPct < 0.5001;

  // 10%, 25%, 50% of BALANCE
  const v10  = MIN_COIN;                      // 1000 (10% of balance)
  const v25  = Math.min(Math.floor(BALANCE * 0.25), MAX_COIN); // 2500
  const v50  = MAX_COIN;                      // 5000 (50% of balance)

  wrap.innerHTML = '';
  [{label:'10%', val:v10}, {label:'25%', val:v25}, {label:'50%', val:v50}
  ].forEach(b => {
    const btn = document.createElement('button');
    btn.className = 'pct-btn';
    btn.textContent = b.label;
    btn.onclick = () => applyPct(ticker, b.val);
    wrap.appendChild(btn);
  });
}

function applyPct(ticker, amount) {
  if (amount <= 0) return;
  // cap at MAX_COIN
  const capped = Math.min(amount, MAX_COIN);
  // also ensure total doesn't exceed BALANCE
  const otherAlloc = getAlloc() - (allocValues[ticker] || 0);
  const finalAmt = Math.min(capped, BALANCE - otherAlloc);
  allocValues[ticker] = finalAmt;
  const el = document.getElementById('inp-' + ticker);
  if (el) { el.value = finalAmt; el.classList.remove('over'); }
  const pw = document.getElementById('pw-' + ticker);
  if (pw) pw.classList.remove('show');
  recalc();
  // re-render % buttons for all (remaining changed)
  selected.forEach(t => renderPctBtns(t));
}

function onInp(ticker, el) {
  let v = parseInt(el.value) || 0;
  const pw = document.getElementById('pw-' + ticker);
  if (v > MAX_COIN) {
    el.value = MAX_COIN; v = MAX_COIN;
    el.classList.add('over'); pw.classList.add('show');
    toast('Bir s…ôhm…ô maksimum 50% (5,000 coin)!', 'warn');
  } else {
    el.classList.remove('over'); pw.classList.remove('show');
  }
  allocValues[ticker] = v;
  recalc();
  selected.forEach(t => renderPctBtns(t));
}

function getAlloc() {
  return selected.reduce((s, t) => s + (allocValues[t] || 0), 0);
}

function recalc() {
  const a = getAlloc(), rem = BALANCE - a, pct = Math.min((a / BALANCE) * 100, 100);
  document.getElementById('biAlloc').textContent = a.toLocaleString() + ' coin';
  document.getElementById('biRem').textContent = rem.toLocaleString() + ' coin';
  const f = document.getElementById('progFill'); f.style.width = pct + '%'; f.classList.toggle('over', a > BALANCE);
  validate(a);
  updateRoundBalance(rem);
}

// Round 3 results from previous rounds
const ROUND_RESULTS = [842, 717]; // r1, r2
function calcFinalBalance() {
  // Final Score = (Œ£ ri / n) √ó 6
  const n = ROUND_RESULTS.length;
  const sum = ROUND_RESULTS.reduce((a, b) => a + b, 0);
  return Math.round((sum / n) * 6);
}
function updateRoundBalance(remaining) {
  const el = document.getElementById('roundBalanceDisplay');
  if (el) el.textContent = remaining.toLocaleString();
}
function updateFinalBalance(roundResult) {
  // Add current round result to final calc
  const allResults = [...ROUND_RESULTS, roundResult];
  const n = allResults.length;
  const sum = allResults.reduce((a, b) => a + b, 0);
  const score = Math.round((sum / n) * 6);
  const el = document.getElementById('finalBalanceDisplay');
  if (el) el.textContent = score.toLocaleString();
}

function validate(a) {
  const btn = document.getElementById('confirmBtn'), cnt = selected.length;
  let m = '';
  if (cnt < MIN_S) m = `Minimum ${MIN_S}, maksimum ${MAX_S} s…ôhm se√ßm…ôlis…ôn. (Hazƒ±rda: ${cnt})`;
  else if (a > BALANCE) m = `Balans yetmir! Ayrƒ±lan: ${a.toLocaleString()} coin.`;
  else {
    // check each stock has min 10% (1000 coin)
    const underMin = selected.filter(t => (allocValues[t] || 0) < MIN_COIN);
    if (underMin.length > 0) m = `H…ôr s…ôhm…ô minimum 10% (1,000 coin) yerl…ô≈üdirm…ôlisiniz.`;
  }
  const wb = document.getElementById('warningBox');
  if (m) { wb.textContent = '‚ö† ' + m; wb.classList.add('show'); btn.disabled = true; }
  else { wb.classList.remove('show'); btn.disabled = false; }
}

function confirmPortfolio() {
  const a = getAlloc(); confirmed = true;
  document.getElementById('basketWrap').style.display = 'none';
  const fl = document.getElementById('confirmedFlash'); fl.style.display = 'block';
  document.getElementById('confirmedItems').innerHTML = selected.map(ticker => {
    const s = STOCKS.find(x => x.ticker === ticker);
    const amt = allocValues[ticker] || 0;
    const pct = ((amt/BALANCE)*100).toFixed(0);
    return `<div class="conf-chip">
      <span style="font-weight:800;color:#0a3060;">${s.ticker}</span>
      <span class="chip-amt">${amt.toLocaleString()}</span>
      <span style="font-size:.6rem;color:#5a8060;background:#d0f0d8;border-radius:4px;padding:1px 5px;">${pct}%</span>
    </div>`;
  }).join('');
  document.getElementById('confirmedStat').textContent = `Toplam: ${a.toLocaleString()} coin ayrƒ±ldƒ± ¬∑ Qalan: ${(BALANCE - a).toLocaleString()} coin`;
  updateW3Display(a);
  arenaRenderStocks(document.getElementById('searchInput').value);
}

function updateW3Display(totalAlloc) {
  const div = document.getElementById('w3PortfolioDisplay');
  let html = `<div style="font-size:.78rem;font-weight:700;color:var(--accent2);margin-bottom:.45rem">Portfel 6 ‚Äî G√ºn 31 (3-c√º round ba≈ülanƒüƒ±cƒ±)</div>
  <table class="hist-table"><thead><tr><th>Ticker</th><th>≈ûirk…ôt</th><th>Coin</th><th>Qiym…ôt</th><th>Pay</th></tr></thead><tbody>`;
  selected.forEach(ticker => {
    const s = STOCKS.find(x => x.ticker === ticker);
    const amt = allocValues[ticker] || 0;
    const pct = totalAlloc > 0 ? ((amt / totalAlloc) * 100).toFixed(1) : '0';
    html += `<tr><td class="mono" style="color:var(--accent2)">${s.ticker}</td><td>${s.name}</td><td class="mono">${amt.toLocaleString()}</td><td class="mono">$${s.price.toFixed(2)}</td><td class="mono">${pct}%</td></tr>`;
  });
  html += '</tbody></table>';
  div.innerHTML = html;
}

function clearBasket() { selected = []; confirmed = false; Object.keys(allocValues).forEach(k => delete allocValues[k]); document.getElementById('confirmedFlash').style.display = 'none'; updateBasket(); arenaRenderStocks(document.getElementById('searchInput').value); }
function resetConfirm() { confirmed = false; document.getElementById('confirmedFlash').style.display = 'none'; if (selected.length) { document.getElementById('basketWrap').style.display = 'block'; renderItems(); recalc(); } arenaRenderStocks(document.getElementById('searchInput').value); }

/* ======= SCREENS / TABS ======= */
function showScreen(name) {
  document.getElementById('AS').querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById('screen-' + name).classList.add('active');
  document.getElementById('AS').querySelectorAll('.nav-btn').forEach((b, i) => {
    b.classList.toggle('active', (i===0&&name==='stocks')||(i===1&&name==='portfel')||(i===2&&name==='siralama')||(i===3&&name==='xeberler'));
  });
}
function switchWeek(name, btn) {
  document.getElementById('AS').querySelectorAll('.week-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('AS').querySelectorAll('.week-panel').forEach(p => p.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('panel-' + name).classList.add('active');
}
function loadFriends() {
  document.getElementById('dp-lock').style.display = 'none';
  document.getElementById('dp-list').style.display = 'block';
}
function switchDashTab(name, btn) {
  document.getElementById('AS').querySelectorAll('.dash-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('AS').querySelectorAll('.dash-panel').forEach(p => p.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('panel-' + name).classList.add('active');
}
function openModal(id) { document.getElementById(id).classList.add('show'); }
function closeModal(id) { document.getElementById(id).classList.remove('show'); }
document.getElementById('AS').querySelectorAll('.modal-overlay').forEach(o => {
  o.addEventListener('click', function(e) { if (e.target === this) this.classList.remove('show'); });
});

/* ======= BTC ======= */
function submitBTC() {
  const price = document.getElementById('btcPrice').value;
  if (!price) { toast('BTC qiym…ôt proqnozunuzu daxil edin.', 'warn'); return; }
  window._btcGuess = parseFloat(price);
  // Update portfel history display
  document.getElementById('w3BtcDisplay').innerHTML = `<div class="btc-hist-row">
    <div><div class="bhr-label">Tarix</div><div class="bhr-val">31.03.2026, 23:59</div></div>
    <div><div class="bhr-label">T…ôxminim</div><div class="bhr-val" style="color:var(--accent2)">$${Number(price).toLocaleString()}</div></div>
    <div><div class="bhr-label">H…ôqiqi qiym…ôt</div><div class="bhr-val" style="color:var(--muted)">G√∂zl…ônilir‚Ä¶</div></div>
    <div class="bhr-result" style="color:var(--muted)">N…ôtic…ô 31.03.2026-da a√ßƒ±qlanacaq</div>
  </div>`;
  // Update float button to show confirmed state
  const fb = document.querySelector('.float-btn');
  if (fb) fb.innerHTML = '<span class="bi">‚Çø</span><span class="be">$' + Number(price).toLocaleString() + ' ‚úì</span>';
  // Show success in modal, switch to confirmed view
  document.getElementById('btcForm').style.display = 'none';
  document.getElementById('btcSuccess').classList.add('show');
  // Update siralama round 3 BTC strip if visible
  if (currentRoundView === 3) showRoundHistory(3);
  setTimeout(() => { closeModal('btcModal'); }, 1800);
}

function openBtcModal() {
  // If already submitted, show read-only confirmed view
  if (window._btcGuess) {
    document.getElementById('btcForm').style.display = 'none';
    document.getElementById('btcSuccess').classList.add('show');
    // Update success message
    document.getElementById('btcSuccess').innerHTML =
      `‚úÖ Proqnozunuz 3-c√º round √º√ß√ºn qeyd…ô alƒ±ndƒ±!<br>` +
      `<div style="margin-top:.5rem;font-size:.82rem;font-weight:700;color:var(--accent2);">Sizin t…ôxmininiz: $${Number(window._btcGuess).toLocaleString()}</div>` +
      `<div style="font-size:.75rem;color:var(--muted);margin-top:.25rem;">N…ôtic…ô g√∂zl…ônilir ‚Äî 31.03.2026</div>`;
  } else {
    document.getElementById('btcForm').style.display = 'block';
    document.getElementById('btcSuccess').classList.remove('show');
  }
  openModal('btcModal');
}

/* ======= LEADERBOARD ======= */
function rankCls(r) { return r===1?'rank-gold':r===2?'rank-silver':r===3?'rank-bronze':''; }
function arenaRenderLeaderboard(id, data, colLabel) {
  const t = document.getElementById(id);
  const lbl = colLabel || 'ABB Coin';
  let html = `<thead><tr><th style="width:46px">Sƒ±ra</th><th>ƒ∞stifad…ô√ßi</th><th>${lbl}</th><th>M√ºkafat</th></tr></thead><tbody>`;
  let prev = 0;
  data.forEach(row => {
    if (row === null) { html += `<tr class="dots-row"><td colspan="4">¬∑ ¬∑ ¬∑</td></tr>`; prev = 0; return; }
    if (prev && row.rank > prev + 1 && prev > 0) html += `<tr class="dots-row"><td colspan="4">¬∑ ¬∑ ¬∑</td></tr>`;
    const me = row.isMe, rc = rankCls(row.rank);
    html += `<tr class="${me?'me':''}">
      <td class="rank-col ${rc}">${row.rank}</td>
      <td>${row.name}${me?'<span class="me-badge">Sƒ∞Z</span>':''}</td>
      <td class="coin-val" style="color:var(--accent)">${row.coin} <span style="color:var(--muted);font-size:.68rem">coin</span></td>
      <td><span class="prize-tag">${row.prize}</span></td>
    </tr>`;
    prev = row.rank;
  });
  t.innerHTML = html + '</tbody>';
}


</script>
</body>
</html>